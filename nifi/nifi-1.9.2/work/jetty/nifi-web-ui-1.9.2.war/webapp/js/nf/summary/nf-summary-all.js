(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(nf.Dialog=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Dialog=b(require("jquery")))}else{nf.Dialog=b(a.$)}}}(this,function(b){b(document).ready(function(){b("#nf-ok-dialog").modal({scrollableContentStyle:"scrollable",handler:{close:function(){b("#nf-ok-dialog-content").empty()}}});b("#nf-yes-no-dialog").modal({scrollableContentStyle:"scrollable",handler:{close:function(){b("#nf-yes-no-dialog-content").empty();b("#nf-yes-no-dialog").modal("setButtonModel",[])}}})});var a={showOkDialog:function(c){c=b.extend({headerText:"",dialogContent:""},c);var d=b("<p></p>").append(c.dialogContent);b("#nf-ok-dialog-content").append(d).append("</br>");b("#nf-ok-dialog").modal("setButtonModel",[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){b("#nf-ok-dialog").modal("hide");if(typeof c.okHandler==="function"){c.okHandler.call(this)}}}}]);b("#nf-ok-dialog").modal("setHeaderText",c.headerText).modal("show")},showYesNoDialog:function(c){c=b.extend({headerText:"",dialogContent:"",yesText:"Yes",noText:"No"},c);var d=b("<p></p>").append(c.dialogContent);b("#nf-yes-no-dialog-content").append(d);b("#nf-yes-no-dialog").modal("setButtonModel",[{buttonText:c.yesText,color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){b("#nf-yes-no-dialog").modal("hide");if(typeof c.yesHandler==="function"){c.yesHandler.call(this)}}}},{buttonText:c.noText,color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){b("#nf-yes-no-dialog").modal("hide");if(typeof c.noHandler==="function"){c.noHandler.call(this)}}}}]);b("#nf-yes-no-dialog").modal("setHeaderText",c.headerText).modal("show")},showDisconnectedFromClusterMessage:function(c){a.showOkDialog({headerText:"Cluster Connection",dialogContent:"This node is currently not connected to the cluster. Any modifications to the data flow made here will not replicate across the cluster.",okHandler:function(){if(typeof c==="function"){c.call(this)}}})},showConnectedToClusterMessage:function(c){a.showOkDialog({headerText:"Cluster Connection",dialogContent:"This node just joined the cluster. Any modifications to the data flow made here will replicate across the cluster.",okHandler:function(){if(typeof c==="function"){c.call(this)}}})}};return a}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.Storage=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Storage=b())}else{nf.Storage=b()}}}(this,function(){var h=false;var g=86400000;var f=g*2;var b=function(i){return typeof i==="undefined"};var e=function(i){return i===null};var d=function(i){return !b(i)&&!e(i)};var c=function(k){if(d(k.expires)){var i=new Date(k.expires);var j=new Date();return i.valueOf()<j.valueOf()}else{return false}};var a=function(i){try{var j=JSON.parse(localStorage.getItem(i));if(d(j)){return j}else{return null}}catch(k){return null}};return{init:function(){for(var k=0;k<localStorage.length;k++){try{var j=localStorage.key(k);this.getItem(j)}catch(l){}}},acknowledgeDisconnection:function(){h=true},resetDisconnectionAcknowledgement:function(){h=false},isDisconnectionAcknowledged:function(){return h},setItem:function(j,l,i){i=d(i)?i:new Date().valueOf()+f;var k={expires:i,item:l};localStorage.setItem(j,JSON.stringify(k))},hasItem:function(i){return a(i)!==null},getItem:function(i){var j=a(i);if(j===null){return null}if(c(j)){this.removeItem(i);return null}if(d(j.item)){return j.item}else{return null}},getItemExpiration:function(i){var j=a(i);if(j===null){return null}if(d(j.expires)){return j.expires}else{return null}},removeItem:function(i){localStorage.removeItem(i)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.Storage"],function(e,d,c){return(nf.Common=b(e,d,c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Common=b(require("jquery"),require("d3"),require("nf.Storage")))}else{nf.Common=b(a.$,a.d3,a.nf.Storage)}}}(this,function(e,d,b){e(document).ready(function(){var g="images/bg-error.png";e("<img/>").attr("src",g).on("load",function(){e("div.message-pane").css("background-image",g)});e(document).on("mouseenter","span.link",function(){e(this).addClass("link-over")}).on("mouseleave","span.link",function(){e(this).removeClass("link-over")});e(document).on("click","div.nf-checkbox",function(){var h=e(this);if(h.hasClass("checkbox-unchecked")){h.removeClass("checkbox-unchecked").addClass("checkbox-checked")}else{h.removeClass("checkbox-checked").addClass("checkbox-unchecked")}h.trigger("change")});e(document).on("click",".nf-checkbox-label",function(h){e(h.target).parent().find(".nf-checkbox").click()});e(document).ajaxStart(function(){e("div.loading-container").addClass("ajax-loading")}).ajaxStop(function(){e("div.loading-container").removeClass("ajax-loading")});if(b.getItem("jwt")!==null){e("#user-logout-container").css("display","block");f.scheduleTokenRefresh()}e("#user-logout").on("click",function(){b.removeItem("jwt");window.location="../nifi/logout"});e("#user-home").on("click",function(){if(top!==window){parent.window.location="../nifi"}else{window.location="../nifi"}})});var c=null;var a=[{text:"view the user interface",value:"flow",description:"Allows users to view the user interface"},{text:"access the controller",value:"controller",description:"Allows users to view/modify the controller including Reporting Tasks, Controller Services, and Nodes in the Cluster"},{text:"query provenance",value:"provenance",description:"Allows users to submit a Provenance Search and request Event Lineage"},{text:"access restricted components",value:"restricted-components",description:"Allows users to create/modify restricted components assuming other permissions are sufficient"},{text:"access all policies",value:"policies",description:"Allows users to view/modify the policies for all components"},{text:"access users/user groups",value:"tenants",description:"Allows users to view/modify the users and user groups"},{text:"retrieve site-to-site details",value:"site-to-site",description:"Allows other NiFi instances to retrieve Site-To-Site details of this NiFi"},{text:"view system diagnostics",value:"system",description:"Allows users to view System Diagnostics"},{text:"proxy user requests",value:"proxy",description:"Allows proxy machines to send requests on the behalf of others"},{text:"access counters",value:"counters",description:"Allows users to view/modify Counters"}];var f={ANONYMOUS_USER_TEXT:"Anonymous user",config:{sensitiveText:"Sensitive value set",tooltipConfig:{style:{classes:"nifi-tooltip"},show:{solo:true,effect:function(g){e(this).slideDown(100)}},hide:{effect:function(g){e(this).slideUp(100)}},position:{at:"top center",my:"bottom center"}}},SUPPORTS_SVG:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,currentUser:undefined,sortVersion:function(g,r){if(g===r){return 0}var n=g.split(/-/);var s=r.split(/-/);if(n.length>=1&&s.length>=1){var p=n[0].split(/\./);var m=s[0].split(/\./);if(p.length>=1&&m.length>=1){var k=Math.min(p.length,m.length);for(var l=0;l<k;l++){var q=parseInt(p[l],10);var j=parseInt(m[l],10);if(isNaN(q)&&isNaN(j)){continue}else{if(isNaN(q)){return -1}else{if(isNaN(j)){return 1}}}if(q!==j){return q-j}}if(p.length===m.length){if(n.length===s.length){var o=f.substringAfterFirst(g,n[0]);var h=f.substringAfterFirst(r,s[0]);return o===h?0:o>h?1:-1}else{return s.length-n.length}}else{return p.length-m.length}}else{if(p.length>=1){return 1}else{if(m.length>=1){return -1}else{return 0}}}}else{if(n.length>=1){return 1}else{if(s.length>=1){return -1}else{return 0}}}},sortType:function(g,j){var h=function(m,k){var n=f.formatBundle(m.bundle);var l=f.formatBundle(k.bundle);return n===l?0:n>l?1:-1};var i=function(r,q){if(g.columnId==="version"){var p=f.isDefinedAndNotNull(r.bundle[g.columnId])?r.bundle[g.columnId]:"";var n=f.isDefinedAndNotNull(q.bundle[g.columnId])?q.bundle[g.columnId]:"";var l=f.sortVersion(p,n);return l===0?h(r,q):l}else{if(g.columnId==="type"){var o=f.substringAfterLast(r[g.columnId],".");var m=f.substringAfterLast(q[g.columnId],".");return o===m?0:o>m?1:-1}else{var k=f.isDefinedAndNotNull(r[g.columnId])?r[g.columnId]:"";var s=f.isDefinedAndNotNull(q[g.columnId])?q[g.columnId]:"";return k===s?h(r,q):k>s?1:-1}}};j.sort(i,g.sortAsc)},typeFormatter:function(l,h,k,j,g){var i="";if(g.restricted===true){i+='<div class="view-usage-restriction fa fa-shield"></div><span class="hidden row-id">'+f.escapeHtml(g.id)+"</span>"}else{i+='<div class="fa"></div>'}i+=f.escapeHtml(k);return i},genericValueFormatter:function(k,h,j,i,g){return f.escapeHtml(j)},typeBundleFormatter:function(k,h,j,i,g){return f.escapeHtml(f.formatBundle(g.bundle))},typeVersionFormatter:function(l,h,k,j,g){var i="";if(f.isDefinedAndNotNull(g.bundle)){i+=('<div style="float: left;">'+f.escapeHtml(g.bundle.version)+"</div>")}else{i+='<div style="float: left;">unversioned</div>'}if(!f.isEmpty(g.controllerServiceApis)){i+='<div class="controller-service-apis fa fa-list" title="Compatible Controller Service" style="margin-left: 4px;"></div><span class="hidden row-id">'+f.escapeHtml(g.id)+"</span>"}i+='<div class="clear"></div>';return i},instanceTypeFormatter:function(k,h,j,i,g){if(!g.permissions.canRead){return""}return f.escapeHtml(f.formatType(g.component))},instanceBundleFormatter:function(k,h,j,i,g){if(!g.permissions.canRead){return""}return f.typeBundleFormatter(k,h,j,i,g.component)},getVersionControlTooltip:function(g){return g.stateExplanation},formatClassName:function(g){return f.substringAfterLast(g.type,".")},formatType:function(g){var h=f.formatClassName(g);if(g.bundle.version!=="unversioned"){h+=(" "+g.bundle.version)}return h},formatBundle:function(g){var h="";if(g.group!=="default"){h=g.group+" - "}return h+g.artifact},setCurrentUser:function(g){f.currentUser=g},scheduleTokenRefresh:function(){if(c!==null){clearInterval(c)}var g=f.MILLIS_PER_MINUTE;var h=function(){var j=b.getItemExpiration("jwt");if(j!==null){var l=new Date(j);var k=new Date();var i=l.valueOf()-k.valueOf()-(30*f.MILLIS_PER_SECOND);if(i<g){if(e("#current-user").text()!==f.ANONYMOUS_USER_TEXT&&!e("#anonymous-user-alert").is(":visible")){e("#anonymous-user-alert").show().qtip(e.extend({},f.config.tooltipConfig,{content:"Your session will expire soon. Please log in again to avoid being automatically logged out.",position:{my:"top right",at:"bottom left"}}))}}}};h();c=setInterval(h,g)},setAnonymousUserLabel:function(){var g=e("#anonymous-user-alert");if(g.data("qtip")){g.qtip("api").destroy(true)}g.show().qtip(e.extend({},f.config.tooltipConfig,{content:"You are accessing with limited authority. Log in or request an account to access with additional authority granted to you by an administrator.",position:{my:"top right",at:"bottom left"}}));e("#current-user").text(f.ANONYMOUS_USER_TEXT).show()},getJwtPayload:function(h){if(f.isDefinedAndNotNull(h)){var g=h.split(/\./);if(g.length!==3){return""}var j=e.base64.atob(g[1]);var i=JSON.parse(j);if(f.isDefinedAndNotNull(i)){return i}else{return null}}return null},canVersionFlows:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.canVersionFlows===true}else{return false}},canAccessProvenance:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.provenancePermissions.canRead===true}else{return false}},canAccessRestrictedComponents:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.restrictedComponentsPermissions.canWrite===true}else{return false}},canAccessComponentRestrictions:function(h){if(f.isDefinedAndNotNull(f.currentUser)){if(f.currentUser.restrictedComponentsPermissions.canWrite===true){return true}var g=function(k){if(f.isEmpty(f.currentUser.componentRestrictionPermissions)){return false}var j=false;e.each(f.currentUser.componentRestrictionPermissions,function(l,m){if(m.requiredPermission.id===k.id){if(m.permissions.canWrite===true){j=true;return false}}});return j};var i=true;if(f.isEmpty(h)){i=false}else{e.each(h,function(j,k){if(!g(k.requiredPermission)){i=false;return false}})}return i}else{return false}},canAccessCounters:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.countersPermissions.canRead===true}else{return false}},canModifyCounters:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.countersPermissions.canRead===true&&f.currentUser.countersPermissions.canWrite===true}else{return false}},canAccessTenants:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.tenantsPermissions.canRead===true}else{return false}},canModifyTenants:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.tenantsPermissions.canRead===true&&f.currentUser.tenantsPermissions.canWrite===true}else{return false}},canAccessPolicies:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.policiesPermissions.canRead===true}else{return false}},canModifyPolicies:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.policiesPermissions.canRead===true&&f.currentUser.policiesPermissions.canWrite===true}else{return false}},canAccessController:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.controllerPermissions.canRead===true}else{return false}},canModifyController:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.controllerPermissions.canRead===true&&f.currentUser.controllerPermissions.canWrite===true}else{return false}},canAccessSystem:function(){if(f.isDefinedAndNotNull(f.currentUser)){return f.currentUser.systemPermissions.canRead===true}else{return false}},addHoverEffect:function(g,i,h){e(document).on("mouseenter",g,function(){e(this).removeClass(i).addClass(h)}).on("mouseleave",g,function(){e(this).removeClass(h).addClass(i)});return e(g).addClass(i)},toggleScrollable:function(g){if(e(g).is(":visible")){if(g.offsetHeight<g.scrollHeight||g.offsetWidth<g.scrollWidth){e(g).addClass("scrollable")}else{e(g).removeClass("scrollable")}}},determineContrastColor:function(g){if(parseInt(g,16)>16777215/1.5){return"#000000"}return"#ffffff"},showLogoutLink:function(){if(b.getItem("jwt")===null){e("#user-logout-container").css("display","none")}else{e("#user-logout-container").css("display","block")}},isContentViewConfigured:function(){var g=e("#nifi-content-viewer-url").text();return !f.isBlank(g)},populateField:function(h,g){if(f.isUndefined(g)||f.isNull(g)){return e("#"+h).addClass("unset").text("No value set")}else{if(g===""){return e("#"+h).addClass("blank").text("Empty string set")}else{return e("#"+h).text(g)}}},clearField:function(g){return e("#"+g).removeClass("unset blank").text("")},cleanUpTooltips:function(g,h){g.find(h).each(function(){var j=e(this);if(j.data("qtip")){var i=j.qtip("api");i.destroy(true)}})},formatPropertyTooltip:function(h,j){var k=[];if(f.isDefinedAndNotNull(h)){if(!f.isBlank(h.description)){k.push(f.escapeHtml(h.description))}if(!f.isBlank(h.defaultValue)){k.push("<b>Default value:</b> "+f.escapeHtml(h.defaultValue))}if(!f.isBlank(h.supportsEl)){k.push("<b>Expression language scope:</b> "+f.escapeHtml(h.expressionLanguageScope))}if(!f.isBlank(h.identifiesControllerService)){var g=f.formatType({type:h.identifiesControllerService,bundle:h.identifiesControllerServiceBundle});var i=f.formatBundle(h.identifiesControllerServiceBundle);k.push("<b>Requires Controller Service:</b> "+f.escapeHtml(g+" from "+i))}}if(f.isDefinedAndNotNull(j)){if(!f.isEmpty(j.previousValues)){var l=[];e.each(j.previousValues,function(n,m){l.push("<li>"+f.escapeHtml(m.previousValue)+" - "+f.escapeHtml(m.timestamp)+" ("+f.escapeHtml(m.userIdentity)+")</li>")});k.push('<b>History:</b><ul class="property-info">'+l.join("")+"</ul>")}}if(k.length>0){return k.join("<br/><br/>")}else{return null}},formatProperty:function(g,h){return'<div><span class="label">'+f.formatValue(g)+": </span>"+f.formatValue(h)+"</div>"},formatValue:function(g){if(f.isDefinedAndNotNull(g)){if(g===""){return'<span class="blank" style="font-size: 13px; padding-top: 2px;">Empty string set</span>'}else{return f.escapeHtml(g)}}else{return'<span class="unset" style="font-size: 13px; padding-top: 2px;">No value set</span>'}},escapeHtml:(function(){var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2f;"};return function(h){if(f.isDefinedAndNotNull(h)){return String(h).replace(/[&<>"'\/]/g,function(i){return g[i]})}else{return""}}}()),isSensitiveProperty:function(g){if(f.isDefinedAndNotNull(g)){return g.sensitive===true}else{return false}},isRequiredProperty:function(g){if(f.isDefinedAndNotNull(g)){return g.required===true}else{return false}},isDynamicProperty:function(g){if(f.isDefinedAndNotNull(g)){return g.dynamic===true}else{return false}},getAllowableValues:function(g){if(f.isDefinedAndNotNull(g)){return g.allowableValues}else{return null}},supportsEl:function(g){if(f.isDefinedAndNotNull(g)){return g.supportsEl===true}else{return false}},formatUnorderedList:function(h){if(e.isArray(h)){var g=e('<ul class="result"></ul>');e.each(h,function(j,k){var i=e("<li></li>").appendTo(g);if(k instanceof jQuery){i.append(k)}else{i.text(k)}});return g}else{return null}},substringAfterLast:function(k,j){var h="";var i=k.lastIndexOf(j);if(i>=0){var g=i+j.length;if(g<k.length){h=k.substr(g)}}return h},substringAfterFirst:function(k,j){var h="";var i=k.indexOf(j);if(i>=0){var g=i+j.length;if(g<k.length){h=k.substr(g)}}return h},substringBeforeLast:function(j,i){var g="";var h=j.lastIndexOf(i);if(h>=0){g=j.substr(0,h)}return g},substringBeforeFirst:function(j,i){var g="";var h=j.indexOf(i);if(h>=0){g=j.substr(0,h)}return g},setCursor:function(h,g){if(g){e("#"+h).addClass("pointer")}else{e("#"+h).removeClass("pointer")}},getAccessToken:function(g){return e.Deferred(function(h){if(b.hasItem("jwt")){e.ajax({type:"POST",url:g}).done(function(i){h.resolve(i)}).fail(function(){h.reject()})}else{h.resolve("")}}).promise()},MILLIS_PER_DAY:86400000,MILLIS_PER_HOUR:3600000,MILLIS_PER_MINUTE:60000,MILLIS_PER_SECOND:1000,loadBalanceStrategyOptions:[{text:"Do not load balance",value:"DO_NOT_LOAD_BALANCE",description:"Do not load balance FlowFiles between nodes in the cluster."},{text:"Partition by attribute",value:"PARTITION_BY_ATTRIBUTE",description:"Determine which node to send a given FlowFile to based on the value of a user-specified FlowFile Attribute. All FlowFiles that have the same value for said Attribute will be sent to the same node in the cluster."},{text:"Round robin",value:"ROUND_ROBIN",description:"FlowFiles will be distributed to nodes in the cluster in a Round-Robin fashion."},{text:"Single node",value:"SINGLE_NODE",description:"All FlowFiles will be sent to the same node. Which node they are sent to is not defined."}],loadBalanceCompressionOptions:[{text:"Do not compress",value:"DO_NOT_COMPRESS",description:"FlowFiles will not be compressed"},{text:"Compress attributes only",value:"COMPRESS_ATTRIBUTES_ONLY",description:"FlowFiles' attributes will be compressed, but the FlowFiles' contents will not be"},{text:"Compress attributes and content",value:"COMPRESS_ATTRIBUTES_AND_CONTENT",description:"FlowFiles' attributes and content will be compressed"}],formatDuration:function(j){j=j<1?0:j;var l=j/f.MILLIS_PER_DAY;l=l>=1?parseInt(l,10):0;j%=f.MILLIS_PER_DAY;var g=j/f.MILLIS_PER_HOUR;g=g>=1?parseInt(g,10):0;j%=f.MILLIS_PER_HOUR;var h=j/f.MILLIS_PER_MINUTE;h=h>=1?parseInt(h,10):0;j%=f.MILLIS_PER_MINUTE;var k=j/f.MILLIS_PER_SECOND;k=k>=1?parseInt(k,10):0;j=Math.floor(j%f.MILLIS_PER_SECOND);var i=f.pad(g,2,"0")+":"+f.pad(h,2,"0")+":"+f.pad(k,2,"0")+"."+f.pad(j,3,"0");if(l>0){return l+" days and "+i}else{return i}},BYTES_IN_KILOBYTE:1024,BYTES_IN_MEGABYTE:1048576,BYTES_IN_GIGABYTE:1073741824,BYTES_IN_TERABYTE:1099511627776,formatDataSize:function(h){var g=parseFloat(h/f.BYTES_IN_TERABYTE);if(g>1){return g.toFixed(2)+" TB"}g=parseFloat(h/f.BYTES_IN_GIGABYTE);if(g>1){return g.toFixed(2)+" GB"}g=parseFloat(h/f.BYTES_IN_MEGABYTE);if(g>1){return g.toFixed(2)+" MB"}g=parseFloat(h/f.BYTES_IN_KILOBYTE);if(g>1){return g.toFixed(2)+" KB"}return parseFloat(h).toFixed(2)+" bytes"},formatInteger:function(h){var g=h+"";var i=/(\d+)(\d{3})/;while(i.test(g)){g=g.replace(i,"$1,$2")}return f.escapeHtml(g)},formatFloat:function(g){if(f.isUndefinedOrNull(g)){return 0+""}return g.toFixed(2)+""},pad:function(j,h,i){var g=j+"";while(g.length<h){g=i+g}return g},formatDateTime:function(g){return f.pad(g.getMonth()+1,2,"0")+"/"+f.pad(g.getDate(),2,"0")+"/"+f.pad(g.getFullYear(),2,"0")+" "+f.pad(g.getHours(),2,"0")+":"+f.pad(g.getMinutes(),2,"0")+":"+f.pad(g.getSeconds(),2,"0")+"."+f.pad(g.getMilliseconds(),3,"0")},parseDateTime:function(k){if(!f.isDefinedAndNotNull(k)){return new Date()}if(k==="No value set"){return new Date()}if(k==="Empty string set"){return new Date()}var r=k.split(/ /);if(r.length!==3){return new Date()}var h=r[0].split(/\//);var g=r[1].split(/:/);if(h.length!==3||g.length!==3){return new Date()}var m=parseInt(h[2],10);var l=parseInt(h[0],10)-1;var n=parseInt(h[1],10);var o=parseInt(g[0],10);var j=parseInt(g[1],10);var q=g[2].split(/\./);var p=parseInt(q[0],10);var i=0;if(q.length===2){i=parseInt(q[1],10)}return new Date(m,l,n,o,j,p,i)},parseDuration:function(g){var h=g.split(/:/);if(h.length!==3){return 0}var i=h[2].split(/\./);if(i.length===2){return new Date(1970,0,1,parseInt(h[0],10),parseInt(h[1],10),parseInt(i[0],10),parseInt(i[1],10)).getTime()}else{return new Date(1970,0,1,parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10),0).getTime()}},parseSize:function(i){var j=i.split(/ /);var h=parseFloat(j[0].replace(/,/g,""));var g=j[1];if(g==="KB"){return h*1024}else{if(g==="MB"){return h*1024*1024}else{if(g==="GB"){return h*1024*1024*1024}else{if(g==="TB"){return h*1024*1024*1024*1024}else{return h}}}}},parseCount:function(i){var h=i.split(/ /,1);if(h.length!==1){return 0}var g=parseInt(h[0].replace(/,/g,""),10);if(isNaN(g)){return 0}return g},isDefinedAndNotNull:function(g){return !f.isUndefined(g)&&!f.isNull(g)},isUndefinedOrNull:function(g){return f.isUndefined(g)||f.isNull(g)},isUndefined:function(g){return typeof g==="undefined"},isBlank:function(g){return f.isUndefined(g)||f.isNull(g)||e.trim(g)===""},isNull:function(g){return g===null},isEmpty:function(g){return e.isArray(g)?g.length===0:true},doBulletinsDiffer:function(h,j){if(e.isArray(h)&&e.isArray(j)){if(h.length===j.length){for(var g=0;g<h.length;g++){if(h[g].id!==j[g].id||h[g].canRead!==j[g].canRead){return true}}}else{return true}}else{if(e.isArray(h)||e.isArray(j)){return true}}return false},getFormattedBulletins:function(h){var g=[];e.each(h,function(k,l){if(l.canRead===true){var i=l.bulletin;var o="";if(f.isDefinedAndNotNull(i.nodeAddress)){o="-&nbsp;"+f.escapeHtml(i.nodeAddress)+"&nbsp;-&nbsp;"}var n=e("<pre></pre>").css({"white-space":"pre-wrap"}).text(i.message);var m=e("<div>"+f.escapeHtml(i.timestamp)+"&nbsp;"+o+"&nbsp;<b>"+f.escapeHtml(i.level)+"</b>&nbsp;</div>").append(n);g.push(m)}});return g},getFormattedServiceApis:function(h){var g=[];e.each(h,function(l,m){var j=f.formatType({type:m.type,bundle:m.bundle});var k=f.formatBundle(m.bundle);g.push(e("<div></div>").text(j+" from "+k))});return g},getFormattedGarbageCollections:function(h){h.sort(function(j,i){return i.collectionCount-j.collectionCount});var g=[];e.each(h,function(k,i){var j=e('<span style="font-weight: bold;"></span>').text(i.name);var l=e("<span></span>").text(" - "+i.collectionCount+" times ("+i.collectionTime+")");var m=e("<div></div>").append(j).append(l);g.push(m)});return g},getPolicyTypeListing:function(h){var g=d.nest().key(function(i){return i.value}).map(a,d.map);return g.get(h)[0]},getComponentName:function(g){return g.permissions.canRead===true?g.component.name:g.id},getComboOptionText:function(g,i){var h=g.find(function(j){return j.value===i});return f.isDefinedAndNotNull(h)?h.text:undefined}};return f}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Dialog","nf.Common"],function(d,c,e){return(nf.ErrorHandler=b(d,c,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ErrorHandler=b(require("jquery"),require("nf.Dialog"),require("nf.Common")))}else{nf.ErrorHandler=b(a.$,a.nf.Dialog,a.nf.Common)}}}(this,function(b,a,c){return{handleAjaxError:function(g,d,e){if(d==="canceled"){if(b("#splash").is(":visible")){b("#message-title").text("Session Expired");b("#message-content").text("Your session has expired. Please reload to log in again.");b("#message-pane").show()}else{a.showOkDialog({headerText:"Session Expired",dialogContent:"Your session has expired. Please press Ok to log in again.",okHandler:function(){window.location="/nifi"}})}return}if(b("#splash").is(":visible")){if(g.status===401){b("#message-title").text("Unauthorized")}else{if(g.status===403){b("#message-title").text("Insufficient Permissions")}else{if(g.status===409){b("#message-title").text("Invalid State")}else{b("#message-title").text("An unexpected error has occurred")}}}if(b.trim(g.responseText)===""){b("#message-content").text("Please check the logs.")}else{b("#message-content").text(g.responseText)}b("#message-pane").show();return}if(g.status===400||g.status===404||g.status===409||g.status===503){a.showOkDialog({headerText:"Error",dialogContent:c.escapeHtml(g.responseText)})}else{if(g.status===403){a.showOkDialog({headerText:"Insufficient Permissions",dialogContent:c.escapeHtml(g.responseText)})}else{if(g.status<99||g.status===12007||g.status===12029){var f="Please ensure the application is running and check the logs for any errors.";if(c.isDefinedAndNotNull(d)){if(d==="timeout"){f="Request has timed out. Please ensure the application is running and check the logs for any errors."}else{if(d==="abort"){f="Request has been aborted."}else{if(d==="No Transport"){f="Request transport mechanism failed. Please ensure the host where the application is running is accessible."}}}}b("#message-title").text("Unable to communicate with NiFi");b("#message-content").text(f)}else{if(g.status===401){b("#message-title").text("Unauthorized");if(b.trim(g.responseText)===""){b("#message-content").text("Authentication is required to use this NiFi.")}else{b("#message-content").text(g.responseText)}}else{if(g.status===500){b("#message-title").text("An unexpected error has occurred");if(b.trim(g.responseText)===""){b("#message-content").text("An error occurred communicating with the application core. Please check the logs and fix any configuration issues before restarting.")}else{b("#message-content").text(g.responseText)}}else{if(g.status===200||g.status===201){b("#message-title").text("Parse Error");if(b.trim(g.responseText)===""){b("#message-content").text("Unable to interpret response from NiFi.")}else{b("#message-content").text(g.responseText)}}else{b("#message-title").text(g.status+": Unexpected Response");b("#message-content").text("An unexpected error has occurred. Please check the logs.")}}}}b("#message-pane").show()}}}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(nf.UniversalCapture=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.UniversalCapture=b(require("jquery")))}else{nf.UniversalCapture=b(a.$)}}}(this,function(b){b(document).ready(function(c){c(window).on("keydown",function(d){var i=d.ctrlKey||d.metaKey;if(!i&&d.keyCode===27){var g=c("div.value-combo");if(g.is(":visible")&&g.parent().hasClass("combo-editor")){return}if(c("div.property-detail").is(":visible")){a.removeAllPropertyDetailDialogs();d.stopImmediatePropagation();d.preventDefault()}else{var h=c(d.target);if(h.length){var j=c(".cancellable");if(j.length){var e=null;var f=null;c.each(j,function(k,m){var l=c(m);var n=l.css("zIndex");if(l.is(":visible")&&(n!==null&&typeof n!=="undefined")){n=parseInt(n,10);if(e===null||n>e){e=n;f=l}}});if(f!==null){if(f.hasClass("modal")){f.modal("hide")}else{f.hide()}d.stopImmediatePropagation();d.preventDefault();return}}if(top!==window){if(typeof parent.nf!=="undefined"&&typeof parent.nf.Shell!=="undefined"){parent.$("#shell-close-button").click();d.stopImmediatePropagation();d.preventDefault();return}}}}}else{if(i){if(d.keyCode===82){d.preventDefault()}}else{if(!c("input, textarea").is(":focus")&&(d.keyCode==8||d.keyCode===46)){d.preventDefault()}}}})});var a={removeAllPropertyDetailDialogs:function(){var c=b("body").find("div.property-detail");c.find("div.nfel-editor").nfeditor("destroy");c.find("div.value-combo").combo("destroy");c.hide().remove()}};return a}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Storage"],function(d,c){return(nf.AjaxSetup=b(d,c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.AjaxSetup=b(require("jquery"),require("nf.Storage")))}else{nf.AjaxSetup=b(a.$,a.nf.Storage)}}}(this,function(b,a){b(document).ready(function(c){c.ajaxSetup({beforeSend:function(f){var d=a.hasItem("jwt");var e=a.getItem("jwt");if(e!==null){f.setRequestHeader("Authorization","Bearer "+e)}else{if(d===true){return false}}}})})}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common"],function(c,d){return(nf.Client=b(c,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Client=b(require("jquery"),require("nf.Common")))}else{nf.Client=b(a.$,a.nf.Common)}}}(this,function(b,c){var a=null;return{init:function(){return b.ajax({type:"GET",url:"../nifi-api/flow/client-id",}).done(function(d){a=d})},getRevision:function(e){return{clientId:a,version:e.revision.version}},isNewerRevision:function(f,d){if(c.isDefinedAndNotNull(f)){var g=f.revision;var e=d.revision;return e.version>=g.version}else{return true}}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.Shell","nf.Dialog","nf.Storage","nf.Client"],function(g,h,c,f,e,d){return(nf.CustomUi=b(g,h,c,f,e,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.CustomUi=b(require("jquery"),require("nf.Common"),require("nf.Shell"),require("nf.Dialog"),require("nf.Storage"),require("nf.Client")))}else{nf.CustomUi=b(a.$,a.nf.Common,a.nf.Shell,a.nf.Dialog,a.nf.Storage,a.nf.Client)}}}(this,function(e,f,a,d,c,b){return{showCustomUi:function(g,i,h){return e.Deferred(function(j){f.getAccessToken("../nifi-api/access/ui-extension-token").done(function(l){e("#shell-close-button");var k=b.getRevision(g);var m={id:g.id,revision:k.version,clientId:k.clientId,editable:h,disconnectedNodeAcknowledged:c.isDisconnectionAcknowledged()};if(!f.isBlank(l)){m.access_token=l}a.showPage(".."+i+"?"+e.param(m),false).done(function(){j.resolve()})}).fail(function(){d.showOkDialog({headerText:"Advanced Configuration",dialogContent:"Unable to generate access token for accessing the advanced configuration dialog."});j.resolve()})}).promise()}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(nf.ClusterSummary=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ClusterSummary=b(require("jquery")))}else{nf.ClusterSummary=b(a.$)}}}(this,function(e){var d=false;var c=false;var f=false;var b=false;var a={urls:{clusterSummary:"../nifi-api/flow/cluster/summary"}};return{loadClusterSummary:function(){return e.ajax({type:"GET",url:a.urls.clusterSummary,dataType:"json"}).done(function(g){var h=g;var i=h.clusterSummary;if(d===true){if(f!==i.connectedToCluster){b=true}}else{if(i.clustered&&!i.connectedToCluster){b=true}}c=i.clustered;f=i.connectedToCluster;d=true})},isClustered:function(){return c===true},isConnectedToCluster:function(){return f===true},didConnectedStateChange:function(){var g=b;b=false;return g}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.UniversalCapture","nf.Dialog","nf.ErrorHandler","nf.CustomUi","nf.ClusterSummary"],function(f,g,i,e,h,d,c){return(nf.ProcessorDetails=b(f,g,i,e,h,d,c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ProcessorDetails=b(require("jquery"),require("nf.Common"),require("nf.UniversalCapture"),require("nf.Dialog"),require("nf.ErrorHandler"),require("nf.CustomUi"),require("nf.ClusterSummary")))}else{nf.ProcessorDetails=b(a.$,a.nf.Common,a.nf.UniversalCapture,a.nf.Dialog,a.nf.ErrorHandler,a.nf.CustomUi,a.nf.ClusterSummary)}}}(this,function(e,f,h,d,g,c,a){var b=function(l){var i=e('<div class="relationship-name ellipsis"></div>').text(l.name);if(l.autoTerminate===true){i.css("font-weight","bold")}var k=e('<div class="processor-relationship-container"></div>').append(i).appendTo("#read-only-auto-terminate-relationship-names");if(!f.isBlank(l.description)){var j=e('<div class="relationship-description"></div>').text(l.description);k.append(j)}return k};return{init:function(i){e("#processor-details-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Settings",tabContentId:"details-standard-settings-tab-content"},{name:"Scheduling",tabContentId:"details-scheduling-tab-content"},{name:"Properties",tabContentId:"details-processor-properties-tab-content"},{name:"Comments",tabContentId:"details-processor-comments-tab-content"}],select:function(){h.removeAllPropertyDetailDialogs();if(e(this).text()==="Properties"){e("#read-only-processor-properties").propertytable("resetTableSize")}var j=e("#read-only-auto-terminate-relationship-names");if(j.is(":visible")&&j.get(0).scrollHeight>Math.round(j.innerHeight())){j.css("border-width","1px")}}});e("#processor-details").modal({headerText:"Processor Details",scrollableContentStyle:"scrollable",handler:{close:function(){e("#read-only-auto-terminate-relationship-names").css("border-width","0").empty();e("#read-only-processor-properties").propertytable("clear");f.clearField("read-only-processor-id");f.clearField("read-only-processor-type");f.clearField("read-only-processor-name");f.clearField("read-only-concurrently-schedulable-tasks");f.clearField("read-only-scheduling-period");f.clearField("read-only-penalty-duration");f.clearField("read-only-yield-duration");f.clearField("read-only-run-duration");f.clearField("read-only-bulletin-level");f.clearField("read-only-execution-node");f.clearField("read-only-execution-status");f.clearField("read-only-processor-comments");e("#processor-details").removeData("processorDetails");e("#processor-details").removeData("processorHistory")},open:function(){f.toggleScrollable(e("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}});e("#read-only-processor-properties").propertytable({supportsGoTo:i,readOnly:true})},showDetails:function(k,l){var j=e.ajax({type:"GET",url:"../nifi-api/processors/"+encodeURIComponent(l),dataType:"json"}).done(function(n){if(f.isDefinedAndNotNull(n.component)){var o=n.component;e("#processor-details").data("processorDetails",o);f.populateField("read-only-processor-id",o.id);f.populateField("read-only-processor-type",f.formatType(o));f.populateField("read-only-processor-bundle",f.formatBundle(o.bundle));f.populateField("read-only-processor-name",o.name);f.populateField("read-only-concurrently-schedulable-tasks",o.config.concurrentlySchedulableTaskCount);f.populateField("read-only-scheduling-period",o.config.schedulingPeriod);f.populateField("read-only-penalty-duration",o.config.penaltyDuration);f.populateField("read-only-yield-duration",o.config.yieldDuration);f.populateField("read-only-run-duration",f.formatDuration(o.config.runDurationMillis));f.populateField("read-only-bulletin-level",o.config.bulletinLevel);f.populateField("read-only-processor-comments",o.config.comments);var m=true;var q=o.config.schedulingStrategy;if(q==="EVENT_DRIVEN"){m=false;q="Event driven"}else{if(q==="CRON_DRIVEN"){q="CRON driven"}else{if(q==="TIMER_DRIVEN"){q="Timer driven"}else{q="On primary node"}}}f.populateField("read-only-scheduling-strategy",q);if(m===true){e("#read-only-run-schedule").show()}else{e("#read-only-run-schedule").hide()}var p=o.config.executionNode;if(p==="ALL"){p="All nodes"}else{if(p==="PRIMARY"){p="Primary node only"}}f.populateField("read-only-execution-node",p);e("#read-only-execution-node-options").show();if(!f.isEmpty(o.relationships)){e.each(o.relationships,function(r,s){b(s)})}else{e("#read-only-auto-terminate-relationship-names").append('<div class="unset">This processor has no relationships.</div>')}}});var i=e.ajax({type:"GET",url:"../nifi-api/flow/history/components/"+encodeURIComponent(l),dataType:"json"}).done(function(m){var n=m.componentHistory;e("#processor-details").data("processorHistory",n)});e.when(j,i).done(function(t,o){var q=t[0];var n=q.component;var m=o[0];var s=m.componentHistory;e("#read-only-processor-properties").propertytable("loadProperties",n.config.properties,n.config.descriptors,s.propertyHistory);var p=[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#processor-details").modal("hide")}}}];if(top===window&&f.isDefinedAndNotNull(c)&&f.isDefinedAndNotNull(n.config.customUiUrl)&&n.config.customUiUrl!==""){p.push({buttonText:"Advanced",clazz:"fa fa-cog button-icon",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){e("#processor-details").modal("hide");c.showCustomUi(q,n.config.customUiUrl,false)}}})}e("#processor-details").modal("setButtonModel",p).modal("show");e("#processor-details div.relationship-name").ellipsis();var r=e("#read-only-auto-terminate-relationship-names");if(r.is(":visible")&&r.get(0).scrollHeight>Math.round(r.innerHeight())){r.css("border-width","1px")}}).fail(function(o,m,n){if(o.status===400||o.status===404||o.status===409){d.showOkDialog({headerText:"Error",dialogContent:f.escapeHtml(o.responseText)})}else{g.handleAjaxError(o,m,n)}})}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","Slick","d3","nf.Client","nf.Dialog","nf.Storage","nf.Common","nf.CanvasUtils","nf.ControllerServices","nf.ErrorHandler","nf.FilteredDialogCommon","nf.ReportingTask","nf.Shell","nf.ComponentState","nf.ComponentVersion","nf.PolicyManagement"],function(j,f,q,r,i,k,g,h,d,m,l,n,e,p,c,o){return(nf.Settings=b(j,f,q,r,i,k,g,h,d,m,l,n,e,p,c,o))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Settings=b(require("jquery"),require("Slick"),require("d3"),require("nf.Client"),require("nf.Dialog"),require("nf.Storage"),require("nf.Common"),require("nf.CanvasUtils"),require("nf.ControllerServices"),require("nf.ErrorHandler"),require("nf.FilteredDialogCommon"),require("nf.ReportingTask"),require("nf.Shell"),require("nf.ComponentState"),require("nf.ComponentVersion"),require("nf.PolicyManagement")))}else{nf.Settings=b(a.$,a.Slick,a.d3,a.nf.Client,a.nf.Dialog,a.nf.Storage,a.nf.Common,a.nf.CanvasUtils,a.nf.ControllerServices,a.nf.ErrorHandler,a.nf.FilteredDialogCommon,a.nf.ReportingTask,a.nf.Shell,a.nf.ComponentState,a.nf.ComponentVersion,a.nf.PolicyManagement)}}}(this,function(A,a,O,i,k,s,M,S,H,d,Q,B,K,e,t,w){var F={urls:{api:"../nifi-api",controllerConfig:"../nifi-api/controller/config",reportingTaskTypes:"../nifi-api/flow/reporting-task-types",createReportingTask:"../nifi-api/controller/reporting-tasks",reportingTasks:"../nifi-api/flow/reporting-tasks",registries:"../nifi-api/controller/registry-clients"}};var z={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var r=function(){return A("#controller-services-table")};var m=function(W){var Y=R();var X={revision:i.getRevision({revision:{version:W}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:Y};A.ajax({type:"PUT",url:F.urls.controllerConfig,data:JSON.stringify(X),dataType:"json",contentType:"application/json"}).done(function(Z){k.showOkDialog({headerText:"Settings",dialogContent:"Settings successfully applied."});A("#settings-save").off("click").on("click",function(){m(Z.revision.version)})}).fail(d.handleAjaxError)};var j=function(){};var R=function(){var W={};W.maxTimerDrivenThreadCount=A("#maximum-timer-driven-thread-count-field").val();W.maxEventDrivenThreadCount=A("#maximum-event-driven-thread-count-field").val();return W};var V=function(Y,X){if(X.searchString===""){return true}try{var ab=new RegExp(X.searchString,"i")}catch(aa){return false}var Z=Y.label.search(ab)>=0;var W=Y.tags.search(ab)>=0;return Z||W};var o=function(Y,W){var X=[];A.each(Y,function(ab,ac){X.push(ac)});var Z=W.toLowerCase();var aa=true;A.each(X,function(ab,ac){if(Z.indexOf(ac)===-1){aa=false;return false}});return aa};var n=function(W){return W.restricted===false||M.canAccessComponentRestrictions(W.explicitRestrictions)};var v=function(aa,X,Z,Y,W){if(!W.permissions.canRead){return'<span class="blank">'+M.escapeHtml(W.id)+"</span>"}return M.escapeHtml(W.component.name)};var T=function(W,Y){var X=function(ag,af){if(ag.permissions.canRead&&af.permissions.canRead){if(W.columnId==="moreDetails"){var ac=0;if(!M.isEmpty(ag.bulletins)){ac=ag.bulletins.length}var Z=0;if(!M.isEmpty(af.bulletins)){Z=af.bulletins.length}return ac-Z}else{if(W.columnId==="type"){var ad=M.isDefinedAndNotNull(ag.component[W.columnId])?M.substringAfterLast(ag.component[W.columnId],"."):"";var ab=M.isDefinedAndNotNull(af.component[W.columnId])?M.substringAfterLast(af.component[W.columnId],"."):"";return ad===ab?0:ad>ab?1:-1}else{if(W.columnId==="state"){var ae;if(ag.component.validationStatus==="VALIDATING"){ae="Validating"}else{if(ag.component.validationStatus==="INVALID"){ae="Invalid"}else{ae=M.isDefinedAndNotNull(ag.component[W.columnId])?ag.component[W.columnId]:""}}var ai;if(af.component.validationStatus==="VALIDATING"){ai="Validating"}else{if(af.component.validationStatus==="INVALID"){ai="Invalid"}else{ai=M.isDefinedAndNotNull(af.component[W.columnId])?af.component[W.columnId]:""}}return ae===ai?0:ae>ai?1:-1}else{var aa=M.isDefinedAndNotNull(ag.component[W.columnId])?ag.component[W.columnId]:"";var ah=M.isDefinedAndNotNull(af.component[W.columnId])?af.component[W.columnId]:"";return aa===ah?0:aa>ah?1:-1}}}}else{if(!ag.permissions.canRead&&!af.permissions.canRead){return 0}if(ag.permissions.canRead){return 1}else{return -1}}};Y.sort(X,W.sortAsc)};var C=function(){return A("#reporting-task-type-filter").val()};var p=function(){var X=A("#reporting-task-types-table").data("gridInstance");if(M.isDefinedAndNotNull(X)){var W=X.getData();W.setFilterArgs({searchString:C()});W.refresh();A("#new-reporting-task-dialog").modal("refreshButtons");if(W.getLength()>0){Q.choseFirstRow(X)}}};var P=function(){A("#reporting-task-type-description").attr("title","").text("");A("#reporting-task-type-name").attr("title","").text("");A("#reporting-task-type-bundle").attr("title","").text("");A("#selected-reporting-task-name").text("");A("#selected-reporting-task-type").text("").removeData("bundle");A("#reporting-task-description-container").hide()};var h=function(){P();var W=A("#reporting-task-types-table").data("gridInstance");W.resetActiveCell()};var I=function(ae,Z){var ac=V(ae,Z);var Y=true;if(ac){var ad=A("#reporting-task-tag-cloud").tagcloud("getSelectedTags");var ab=ad.length>0;if(ab){Y=o(ad,ae.tags)}}var aa=true;if(ac&&Y){var W=A("#reporting-task-bundle-group-combo").combo("getSelectedOption");if(M.isDefinedAndNotNull(W)&&W.value!==""){aa=(ae.bundle.group===W.value)}}var X=ac&&Y&&aa;if(X===false&&A("#selected-reporting-task-type").text()===ae.type){h()}return X};var L=function(){var X=A("#selected-reporting-task-type").text();var W=A("#selected-reporting-task-type").data("bundle");if(X===""){k.showOkDialog({headerText:"Settings",dialogContent:"The type of reporting task to create must be selected."})}else{l(X,W)}};var l=function(W,Y){var Z={revision:i.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{type:W,bundle:Y}};var X=A.ajax({type:"POST",url:F.urls.createReportingTask,data:JSON.stringify(Z),dataType:"json",contentType:"application/json"}).done(function(ab){var ad=A("#reporting-tasks-table").data("gridInstance");var aa=ad.getData();aa.addItem(A.extend({type:"ReportingTask",bulletins:[]},ab));aa.reSort();ad.invalidate();var ac=aa.getRowById(ab.id);Q.choseRow(ad,ac);ad.scrollRowIntoView(ac)}).fail(d.handleAjaxError);A("#new-reporting-task-dialog").modal("hide");return X};var f=function(){var W={revision:i.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{name:A("#registry-name").val(),uri:A("#registry-location").val(),description:A("#registry-description").val()}};var X=A.ajax({type:"POST",url:F.urls.registries,data:JSON.stringify(W),dataType:"json",contentType:"application/json"}).done(function(ab){var Y=A("#registries-table").data("gridInstance");var Z=Y.getData();Z.addItem(A.extend({type:"Registry"},ab));Z.reSort();Y.invalidate();var aa=Z.getRowById(ab.id);Q.choseRow(Y,aa);Y.scrollRowIntoView(aa)}).fail(d.handleAjaxError);A("#registry-configuration-dialog").modal("hide");return X};var y=function(aa){var X=A("#registries-table").data("gridInstance");var Y=X.getData();var ab=Y.getItemById(aa);var Z={revision:i.getRevision(ab),disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged(),component:{id:aa,name:A("#registry-name").val(),uri:A("#registry-location").val(),description:A("#registry-description").val()}};var W=A.ajax({type:"PUT",url:ab.uri,data:JSON.stringify(Z),dataType:"json",contentType:"application/json"}).done(function(ac){Y.updateItem(aa,A.extend({type:"Registry"},ac))}).fail(d.handleAjaxError);A("#registry-configuration-dialog").modal("hide");return W};var g=function(){var X=[{id:"type",name:"Type",field:"label",formatter:M.typeFormatter,sortable:true,resizable:true},{id:"version",name:"Version",field:"version",formatter:M.typeVersionFormatter,sortable:true,resizable:true},{id:"tags",name:"Tags",field:"tags",sortable:true,resizable:true,formatter:M.genericValueFormatter}];var W=new a.Data.DataView({inlineFilters:false});W.setItems([]);W.setFilterArgs({searchString:C()});W.setFilter(I);M.sortType({columnId:"type",sortAsc:true},W);var aa=new a.Grid("#reporting-task-types-table",W,X,z);aa.setSelectionModel(new a.RowSelectionModel());aa.registerPlugin(new a.AutoTooltips());aa.setSortColumn("type",true);aa.onSort.subscribe(function(ac,ab){M.sortType({columnId:ab.sortCol.field,sortAsc:ab.sortAsc},W)});aa.onSelectedRowsChanged.subscribe(function(ag,ad){if(A.isArray(ad.rows)&&ad.rows.length===1){var af=ad.rows[0];var ab=aa.getDataItem(af);if(M.isDefinedAndNotNull(ab)){A("#reporting-task-description-container").show();if(M.isBlank(ab.description)){A("#reporting-task-type-description").attr("title","").html('<span class="unset">No description specified</span>')}else{A("#reporting-task-type-description").width(A("#reporting-task-description-container").innerWidth()-1).html(ab.description).ellipsis()}var ac=M.formatBundle(ab.bundle);var ae=M.formatType(ab);A("#reporting-task-type-name").text(ae).attr("title",ae);A("#reporting-task-type-bundle").text(ac).attr("title",ac);A("#selected-reporting-task-name").text(ab.label);A("#selected-reporting-task-type").text(ab.type).data("bundle",ab.bundle);A("#new-reporting-task-dialog").modal("refreshButtons")}}});aa.onDblClick.subscribe(function(ad,ac){var ab=aa.getDataItem(ac.row);if(n(ab)){l(ab.type,ab.bundle)}});aa.onViewportChanged.subscribe(function(ac,ab){M.cleanUpTooltips(A("#reporting-task-types-table"),"div.view-usage-restriction")});W.onRowCountChanged.subscribe(function(ac,ab){aa.updateRowCount();aa.render();A("#displayed-reporting-task-types").text(ab.current)});W.onRowsChanged.subscribe(function(ac,ab){aa.invalidateRows(ab.rows);aa.render()});W.syncGridSelection(aa,true);A("#reporting-task-types-table").data("gridInstance",aa).on("mouseenter","div.slick-cell",function(ae){var af=A(this).find("div.view-usage-restriction");if(af.length&&!af.data("qtip")){var ad=A(this).find("span.row-id").text();var ac=W.getItemById(ad);if(ac.restricted===true){var ag=A("<div></div>");if(M.isBlank(ac.usageRestriction)){ag.append(A('<p style="margin-bottom: 3px;"></p>').text("Requires the following permissions:"))}else{ag.append(A('<p style="margin-bottom: 3px;"></p>').text(ac.usageRestriction+" Requires the following permissions:"))}var ab=[];if(M.isDefinedAndNotNull(ac.explicitRestrictions)){A.each(ac.explicitRestrictions,function(ah,aj){var ai=aj.requiredPermission;ab.push("'"+ai.label+"' - "+M.escapeHtml(aj.explanation))})}else{ab.push("Access to restricted components regardless of restrictions.")}ag.append(M.formatUnorderedList(ab));af.qtip(A.extend({},M.config.tooltipConfig,{content:ag,position:{container:A("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});var Z=M.getPolicyTypeListing("restricted-components");A.ajax({type:"GET",url:F.urls.reportingTaskTypes,dataType:"json"}).done(function(ac){var ah=0;var ae=[];var ab=O.set();var ag=O.map();var af=O.map();W.beginUpdate();A.each(ac.reportingTaskTypes,function(ai,aj){if(aj.restricted===true){if(M.isDefinedAndNotNull(aj.explicitRestrictions)){A.each(aj.explicitRestrictions,function(ak,am){var al=am.requiredPermission;if(!af.has(al.id)){af.set(al.id,al.label)}if(!ag.has(al.id)){ag.set(al.id,[])}ag.get(al.id).push({type:M.formatType(aj),bundle:M.formatBundle(aj.bundle),explanation:M.escapeHtml(am.explanation)})})}else{if(!af.has(Z.value)){af.set(Z.value,Z.text)}if(!ag.has(Z.value)){ag.set(Z.value,[])}ag.get(Z.value).push({type:M.formatType(aj),bundle:M.formatBundle(aj.bundle),explanation:M.escapeHtml(aj.usageRestriction)})}}ab.add(aj.bundle.group);W.addItem({id:ah++,label:M.substringAfterLast(aj.type,"."),type:aj.type,bundle:aj.bundle,description:M.escapeHtml(aj.description),restricted:aj.restricted,usageRestriction:M.escapeHtml(aj.usageRestriction),explicitRestrictions:aj.explicitRestrictions,tags:aj.tags.join(", ")});A.each(aj.tags,function(al,ak){ae.push(ak.toLowerCase())})});W.endUpdate();W.reSort();aa.invalidate();S.addComponentRestrictions(ag,af);A("#total-reporting-task-types, #displayed-reporting-task-types").text(ac.reportingTaskTypes.length);A("#reporting-task-tag-cloud").tagcloud({tags:ae,select:p,remove:p});var ad=[{text:"all groups",value:""}];ab.each(function(ai){ad.push({text:ai,value:ai})});A("#reporting-task-bundle-group-combo").combo({options:ad,select:p})}).fail(d.handleAjaxError);var Y=[A.ui.keyCode.UP,A.ui.keyCode.PAGE_UP,A.ui.keyCode.DOWN,A.ui.keyCode.PAGE_DOWN];A("#reporting-task-type-filter").off("keyup").on("keyup",function(ae){var ad=ae.keyCode?ae.keyCode:ae.which;if(A.inArray(ad,Y)!==-1){return}if(ad===A.ui.keyCode.ENTER){var ab=aa.getSelectedRows();if(ab.length>0){var ac=aa.getDataItem(ab[0]);if(n(ac)){L()}}}else{p()}});Q.addKeydownListener("#reporting-task-type-filter",aa,aa.getData());A("#new-reporting-task-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Add Reporting Task",buttons:[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},disabled:function(){var ab=aa.getSelectedRows();if(ab.length>0){var ac=aa.getDataItem(ab[0]);return n(ac)===false}else{return aa.getData().getLength()===0}},handler:{click:function(){L()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){A(this).modal("hide")}}}],handler:{close:function(){P();A("#reporting-task-type-filter").val("");A("#reporting-task-tag-cloud").tagcloud("clearSelectedTags");A("#reporting-task-bundle-group-combo").combo("setSelectedOption",{value:""});p();var ab=A("#reporting-task-types-table").data("gridInstance");ab.setSelectedRows([]);ab.resetActiveCell()},resize:function(){A("#reporting-task-type-description").width(A("#reporting-task-description-container").innerWidth()-1).text(A("#reporting-task-type-description").attr("title")).ellipsis()}}});A("#registry-configuration-dialog").modal({scrollableContentStyle:"scrollable",handler:{close:function(){A("#registry-id").text("");A("#registry-name").val("");A("#registry-location").val("");A("#registry-description").val("")}}})};var c=function(){g();var aa=function(aj,ad,ai,af,ac){if(!ac.permissions.canRead){return""}var ae='<div title="View Details" class="pointer view-reporting-task fa fa-info-circle"></div>';ae+='<div title="Usage" class="pointer reporting-task-usage fa fa-book"></div>';var ag=!M.isEmpty(ac.component.validationErrors);var ah=!M.isEmpty(ac.bulletins);if(ag){ae+='<div class="pointer has-errors fa fa-warning" ></div>'}if(ah){ae+='<div class="has-bulletins fa fa-sticky-note-o"></div>'}if(ag||ah){ae+='<span class="hidden row-id">'+M.escapeHtml(ac.component.id)+"</span>"}return ae};var ab=function(ak,aj,ai,ae,ac){var ag="",ah="";if(ac.status.validationStatus==="VALIDATING"){ag="validating fa fa-spin fa-circle-notch";ah="Validating"}else{if(ac.status.validationStatus==="INVALID"){ag="invalid fa fa-warning";ah="Invalid"}else{if(ac.status.runStatus==="STOPPED"){ah="Stopped";ag="fa fa-stop stopped"}else{if(ac.status.runStatus==="RUNNING"){ah="Running";ag="fa fa-play running"}else{ah="Disabled";ag="icon icon-enable-false disabled"}}}}var af="";if(M.isDefinedAndNotNull(ac.status.activeThreadCount)&&ac.status.activeThreadCount>0){af="("+ac.status.activeThreadCount+")"}var ad='<div layout="row"><div class="'+ag+'"></div>';return ad+'<div class="status-text">'+M.escapeHtml(ah)+'</div><div style="float: left; margin-left: 4px;">'+M.escapeHtml(af)+"</div></div>"};var Z=function(al,aj,ah,ag,ac){var ak="";var ad=ac.permissions.canWrite;var af=ac.permissions.canRead;var ai=ac.operatePermissions.canWrite||ad;var ae=ac.status.runStatus==="STOPPED";if(ac.status.runStatus==="RUNNING"){if(ai){ak+='<div title="Stop" class="pointer stop-reporting-task fa fa-stop"></div>'}}else{if(ae||ac.status.runStatus==="DISABLED"){if(af&&ad){ak+='<div title="Edit" class="pointer edit-reporting-task fa fa-pencil"></div>'}if(ai&&ac.status.runStatus==="STOPPED"&&ac.status.validationStatus==="VALID"){ak+='<div title="Start" class="pointer start-reporting-task fa fa-play"></div>'}if(af&&ad&&ac.component.multipleVersionsAvailable===true){ak+='<div title="Change Version" class="pointer change-version-reporting-task fa fa-exchange"></div>'}if(af&&ad&&M.canModifyController()){ak+='<div title="Remove" class="pointer delete-reporting-task fa fa-trash"></div>'}}}if(af&&ad&&ac.component.persistsState===true){ak+='<div title="View State" class="pointer view-state-reporting-task fa fa-tasks"></div>'}if(S.isManagedAuthorizer()&&M.canAccessTenants()){ak+='<div title="Access Policies" class="pointer edit-access-policies fa fa-key"></div>'}return ak};var W=[{id:"moreDetails",name:"&nbsp;",resizable:false,formatter:aa,sortable:true,width:90,maxWidth:90,toolTip:"Sorts based on presence of bulletins"},{id:"name",name:"Name",sortable:true,resizable:true,formatter:v},{id:"type",name:"Type",formatter:M.instanceTypeFormatter,sortable:true,resizable:true},{id:"bundle",name:"Bundle",formatter:M.instanceBundleFormatter,sortable:true,resizable:true},{id:"state",name:"Run Status",sortable:true,resizeable:true,formatter:ab}];W.push({id:"actions",name:"&nbsp;",resizable:false,formatter:Z,sortable:false,width:90,maxWidth:90});var Y=new a.Data.DataView({inlineFilters:false});Y.setItems([]);T({columnId:"name",sortAsc:true},Y);var X=new a.Grid("#reporting-tasks-table",Y,W,z);X.setSelectionModel(new a.RowSelectionModel());X.registerPlugin(new a.AutoTooltips());X.setSortColumn("name",true);X.onSort.subscribe(function(ad,ac){T({columnId:ac.sortCol.id,sortAsc:ac.sortAsc},Y)});X.onClick.subscribe(function(ag,ad){var af=A(ag.target);var ae=Y.getItem(ad.row);if(X.getColumns()[ad.cell].id==="actions"){if(af.hasClass("edit-reporting-task")){B.showConfiguration(ae)}else{if(af.hasClass("start-reporting-task")){B.start(ae)}else{if(af.hasClass("stop-reporting-task")){B.stop(ae)}else{if(af.hasClass("delete-reporting-task")){B.promptToDeleteReportingTask(ae)}else{if(af.hasClass("view-state-reporting-task")){var ac=ae.status.runStatus==="STOPPED"&&ae.status.activeThreadCount===0;e.showState(ae,ac)}else{if(af.hasClass("change-version-reporting-task")){t.promptForVersionChange(ae)}else{if(af.hasClass("edit-access-policies")){w.showReportingTaskPolicy(ae);A("#shell-close-button").click()}}}}}}}}else{if(X.getColumns()[ad.cell].id==="moreDetails"){if(af.hasClass("view-reporting-task")){B.showDetails(ae)}else{if(af.hasClass("reporting-task-usage")){A("#shell-close-button").click();K.showPage("../nifi-docs/documentation?"+A.param({select:ae.component.type,group:ae.component.bundle.group,artifact:ae.component.bundle.artifact,version:ae.component.bundle.version})).done(function(){E.showSettings()})}}}}});Y.onRowCountChanged.subscribe(function(ad,ac){X.updateRowCount();X.render()});Y.onRowsChanged.subscribe(function(ad,ac){X.invalidateRows(ac.rows);X.render()});Y.syncGridSelection(X,true);A("#reporting-tasks-table").data("gridInstance",X).on("mouseenter","div.slick-cell",function(ai){var ag=A(this).find("div.has-errors");if(ag.length&&!ag.data("qtip")){var ac=A(this).find("span.row-id").text();var ae=Y.getItemById(ac);var af=M.formatUnorderedList(ae.component.validationErrors);if(M.isDefinedAndNotNull(af)){ag.qtip(A.extend({},M.config.tooltipConfig,{content:af,position:{target:"mouse",viewport:A("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}var ad=A(this).find("div.has-bulletins");if(ad.length&&!ad.data("qtip")){var ac=A(this).find("span.row-id").text();var ae=Y.getItemById(ac);var ah=M.getFormattedBulletins(ae.bulletins);var af=M.formatUnorderedList(ah);if(M.isDefinedAndNotNull(af)){ad.qtip(A.extend({},M.config.tooltipConfig,{content:af,position:{target:"mouse",viewport:A("#shell-container"),adjust:{x:8,y:8,method:"flipinvert flipinvert"}}}))}}})};var u=function(){var ab=function(ag,ad,af,ae,ac){if(!ac.permissions.canRead){return'<span class="blank">'+M.escapeHtml(ac.id)+"</span>"}return M.escapeHtml(ac.component.uri)};var Z=function(ag,ad,af,ae,ac){if(!ac.permissions.canRead){return'<span class="blank">'+M.escapeHtml(ac.id)+"</span>"}return M.escapeHtml(ac.component.description)};var X=function(ah,ad,ag,af,ac){var ae="";if(M.canModifyController()){ae+='<div title="Edit" class="pointer edit-registry fa fa-pencil"></div>';ae+='<div title="Remove" class="pointer remove-registry fa fa-trash"></div>'}return ae};var aa=[{id:"name",name:"Name",field:"name",formatter:v,sortable:true,resizable:true},{id:"uri",name:"Location",field:"uri",formatter:ab,sortable:true,resizable:true},{id:"description",name:"Description",field:"description",formatter:Z,sortable:true,resizable:true}];aa.push({id:"actions",name:"&nbsp;",resizable:false,formatter:X,sortable:false,width:90,maxWidth:90});var Y=new a.Data.DataView({inlineFilters:false});Y.setItems([]);T({columnId:"name",sortAsc:true},Y);var W=new a.Grid("#registries-table",Y,aa,z);W.setSelectionModel(new a.RowSelectionModel());W.registerPlugin(new a.AutoTooltips());W.setSortColumn("name",true);W.onSort.subscribe(function(ad,ac){T({columnId:ac.sortCol.id,sortAsc:ac.sortAsc},Y)});W.onClick.subscribe(function(ae,ac){var ad=A(ae.target);var af=Y.getItem(ac.row);if(W.getColumns()[ac.cell].id==="actions"){if(ad.hasClass("edit-registry")){D(af)}else{if(ad.hasClass("remove-registry")){q(af)}}}else{if(W.getColumns()[ac.cell].id==="moreDetails"){}}});Y.onRowCountChanged.subscribe(function(ad,ac){W.updateRowCount();W.render()});Y.onRowsChanged.subscribe(function(ad,ac){W.invalidateRows(ac.rows);W.render()});Y.syncGridSelection(W,true);A("#registries-table").data("gridInstance",W)};var D=function(W){A("#registry-id").text(W.id);A("#registry-name").val(W.component.name);A("#registry-location").val(W.component.uri);A("#registry-description").val(W.component.description);A("#registry-configuration-dialog").modal("setHeaderText","Edit Registry Client").modal("setButtonModel",[{buttonText:"Update",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){y(W.id)}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){A(this).modal("hide")}}}]).modal("show")};var q=function(W){k.showYesNoDialog({headerText:"Delete Registry",dialogContent:"Delete registry '"+M.escapeHtml(W.component.name)+"'?",yesHandler:function(){b(W)}})};var b=function(X){var W=i.getRevision(X);A.ajax({type:"DELETE",url:X.uri+"?"+A.param({version:W.version,clientId:W.clientId,disconnectedNodeAcknowledged:s.isDisconnectionAcknowledged()}),dataType:"json"}).done(function(Z){var Y=A("#registries-table").data("gridInstance");var aa=Y.getData();aa.deleteItem(X.id)}).fail(d.handleAjaxError)};var N=function(){var ac=function(){A("#read-only-maximum-timer-driven-thread-count-field").addClass("unset").text("Unauthorized");A("#read-only-maximum-event-driven-thread-count-field").addClass("unset").text("Unauthorized")};var aa=function(ad){if(ad){A("#general-settings div.editable").show();A("#general-settings div.read-only").hide();A("#settings-save").show()}else{A("#general-settings div.editable").hide();A("#general-settings div.read-only").show();A("#settings-save").hide()}};var Z=A.Deferred(function(ad){A.ajax({type:"GET",url:F.urls.controllerConfig,dataType:"json"}).done(function(ae){if(ae.permissions.canWrite){A("#maximum-timer-driven-thread-count-field").removeClass("unset").val(ae.component.maxTimerDrivenThreadCount);A("#maximum-event-driven-thread-count-field").removeClass("unset").val(ae.component.maxEventDrivenThreadCount);aa(true);A("#settings-save").off("click").on("click",function(){m(ae.revision.version)})}else{if(ae.permissions.canRead){A("#read-only-maximum-timer-driven-thread-count-field").removeClass("unset").text(ae.component.maxTimerDrivenThreadCount);A("#read-only-maximum-event-driven-thread-count-field").removeClass("unset").text(ae.component.maxEventDrivenThreadCount)}else{ac()}aa(false)}ad.resolve()}).fail(function(ag,ae,af){if(ag.status===403){ac();aa(false);ad.resolve()}else{ad.reject(ag,ae,af)}})}).promise();var W=F.urls.api+"/flow/controller/controller-services";var Y=H.loadControllerServices(W,r());var ab=G();var X=U();return A.when(Z,Y,ab).done(function(af,ae){var ad=ae[0];A("#settings-last-refreshed").text(ad.currentTime)}).fail(d.handleAjaxError)};var G=function(){return A.ajax({type:"GET",url:F.urls.reportingTasks,dataType:"json"}).done(function(W){var aa=[];A.each(W.reportingTasks,function(ac,ab){aa.push(A.extend({type:"ReportingTask",bulletins:[]},ab))});var Y=A("#reporting-tasks-table");M.cleanUpTooltips(Y,"div.has-errors");M.cleanUpTooltips(Y,"div.has-bulletins");var X=Y.data("gridInstance");var Z=X.getData();Z.setItems(aa);Z.reSort();X.invalidate()})};var U=function(){return A.ajax({type:"GET",url:F.urls.registries,dataType:"json"}).done(function(W){var X=[];A.each(W.registries,function(aa,ab){X.push(A.extend({type:"Registry"},ab))});var Y=A("#registries-table").data("gridInstance");var Z=Y.getData();Z.setItems(X);Z.reSort();Y.invalidate()})};var x=function(){K.showContent("#settings").done(function(){J()});A("#settings-tabs").find(".selected-tab").click();E.resetTableSize()};var J=function(){A("#settings-save").mouseout()};var E={init:function(){A("#settings-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"General",tabContentId:"general-settings-tab-content"},{name:"Reporting Task Controller Services",tabContentId:"controller-services-tab-content"},{name:"Reporting Tasks",tabContentId:"reporting-tasks-tab-content"},{name:"Registry Clients",tabContentId:"registries-tab-content"}],select:function(){var W=A(this).text();if(W==="General"){A("#controller-cs-availability").hide();A("#new-service-or-task").hide();A("#settings-save").show()}else{var X=false;if(M.isDefinedAndNotNull(M.currentUser)){X=M.currentUser.controllerPermissions.canWrite===true}if(X){A("#new-service-or-task").show();A("div.controller-settings-table").css("top","32px");A("#new-service-or-task").attr("title",function(){if(W==="Reporting Task Controller Services"){A("#settings-save").hide();return"Create a new reporting task controller service"}else{if(W==="Reporting Tasks"){A("#settings-save").hide();return"Create a new reporting task"}else{if(W==="Registry Clients"){A("#settings-save").hide();return"Register a new registry client"}}}})}else{A("#new-service-or-task").hide();A("div.controller-settings-table").css("top","0")}if(W==="Reporting Task Controller Services"){A("#controller-cs-availability").show()}else{if(W==="Reporting Tasks"||W==="Registry Clients"){A("#controller-cs-availability").hide()}}E.resetTableSize()}}});A("#settings-refresh-button").click(function(){N()});A("#new-service-or-task").on("click",function(){var Y=A("#settings-tabs li.selected-tab").text();if(Y==="Reporting Task Controller Services"){var X=F.urls.api+"/controller/controller-services";H.promptNewControllerService(X,r())}else{if(Y==="Reporting Tasks"){A("#new-reporting-task-dialog").modal("show");var Z=A("#reporting-task-types-table").data("gridInstance");if(M.isDefinedAndNotNull(Z)){var W=Z.getData();Z.resizeCanvas();if(W.getLength()>0){Q.choseFirstRow(Z)}}A("#reporting-task-type-filter").focus()}else{if(Y==="Registry Clients"){A("#registry-configuration-dialog").modal("setHeaderText","Add Registry Client").modal("setButtonModel",[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){f()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){A(this).modal("hide")}}}]).modal("show");A("#registry-name").focus()}}}});j();H.init(r(),E.showSettings);c();u()},resetTableSize:function(){H.resetTableSize(r());var W=A("#reporting-tasks-table").data("gridInstance");if(M.isDefinedAndNotNull(W)){W.resizeCanvas()}},showSettings:function(){return N().done(x)},loadSettings:function(){return N()},selectControllerService:function(W){var X=r().data("gridInstance");var Y=X.getData();var Z=Y.getRowById(W);Q.choseRow(X,Z);X.scrollRowIntoView(Z);A("#settings-tabs").find("li:eq(1)").click()},selectReportingTask:function(W){var Z=A("#reporting-tasks-table").data("gridInstance");var X=Z.getData();var Y=X.getRowById(W);Q.choseRow(Z,Y);Z.scrollRowIntoView(Y);A("#settings-tabs").find("li:eq(2)").click()},setBulletins:function(Y,W){if(A("#controller-services-table").data("gridInstance")){H.setBulletins(r(),Y)}var X=A("#reporting-tasks-table").data("gridInstance");var aa=X.getData();aa.beginUpdate();if(!M.isEmpty(W)){var ab=O.nest().key(function(ac){return ac.sourceId}).map(W,O.map);ab.each(function(ac,ad){var ae=aa.getItemById(ad);if(M.isDefinedAndNotNull(ae)){aa.updateItem(ad,A.extend(ae,{bulletins:ac}))}})}else{var Z=aa.getItems();A.each(Z,function(ac,ad){aa.updateItem(ad.id,A.extend(ad,{bulletins:[]}))})}aa.endUpdate()}};return E}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.ErrorHandler","nf.Common","nf.Dialog","nf.Storage","nf.Client","nf.ProcessGroup","nf.Shell","nf.CanvasUtils"],function(h,k,j,f,g,i,l,c,d,e){return(nf.ProcessGroupConfiguration=b(h,k,j,f,g,i,l,c,d,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ProcessGroupConfiguration=b(require("jquery"),require("d3"),require("nf.ErrorHandler"),require("nf.Common"),require("nf.Dialog"),require("nf.Storage"),require("nf.Client"),require("nf.ProcessGroup"),require("nf.Shell"),require("nf.CanvasUtils")))}else{nf.ProcessGroupConfiguration=b(a.$,a.d3,a.nf.ErrorHandler,a.nf.Common,a.nf.Dialog,a.nf.Storage,a.nf.Client,a.nf.ProcessGroup,a.nf.Shell,a.nf.CanvasUtils)}}}(this,function(d,r,f,h,j,e,s,g,p,m){var c;var q={urls:{api:"../nifi-api"}};var k=function(){};var b=function(){return d("#process-group-controller-services-table")};var a=function(t,v){var u={revision:s.getRevision({revision:{version:t}}),disconnectedNodeAcknowledged:e.isDisconnectionAcknowledged(),component:{id:v,name:d("#process-group-name").val(),comments:d("#process-group-comments").val()}};d.ajax({type:"PUT",data:JSON.stringify(u),url:q.urls.api+"/process-groups/"+encodeURIComponent(v),dataType:"json",contentType:"application/json"}).done(function(w){if(w.permissions.canRead&&w.component.parentGroupId===m.getGroupId()){g.set(w)}j.showOkDialog({headerText:"Process Group Configuration",dialogContent:"Process group configuration successfully saved."});d("#process-group-configuration-save").off("click").on("click",function(){a(w.revision.version,v)});m.reload()}).fail(f.handleAjaxError)};var l=function(v){var y=function(){d("#read-only-process-group-name").addClass("unset").text("Unauthorized");d("#read-only-process-group-comments").addClass("unset").text("Unauthorized")};var x=function(z){if(z){d("#process-group-configuration div.editable").show();d("#process-group-configuration div.read-only").hide();d("#process-group-configuration-save").show()}else{d("#process-group-configuration div.editable").hide();d("#process-group-configuration div.read-only").show();d("#process-group-configuration-save").hide()}};d("#process-group-id").text(v);d("#process-group-configuration-refresh-button").off("click").on("click",function(){l(v)});d("#add-process-group-configuration-controller-service").off("click").on("click",function(){var A=d("#process-group-configuration-tabs li.selected-tab").text();if(A==="Controller Services"){var z=q.urls.api+"/process-groups/"+encodeURIComponent(v)+"/controller-services";c.promptNewControllerService(z,b())}});var w=d.Deferred(function(z){d.ajax({type:"GET",url:q.urls.api+"/process-groups/"+encodeURIComponent(v),dataType:"json"}).done(function(A){d("#process-group-configuration").data("process-group",A);var B=A.component;if(A.permissions.canWrite){d("#process-group-name").removeClass("unset").val(B.name);d("#process-group-comments").removeClass("unset").val(B.comments);d("#process-group-configuration-header-text").text(B.name+" Configuration");x(true);d("#process-group-configuration-save").off("click").on("click",function(){a(A.revision.version,A.id)})}else{if(A.permissions.canRead){d("#read-only-process-group-name").removeClass("unset").text(B.name);d("#read-only-process-group-comments").removeClass("unset").text(B.comments);d("#process-group-configuration-header-text").text(B.name+" Configuration")}else{y()}x(false)}z.resolve()}).fail(function(C,A,B){if(C.status===403){if(v===m.getGroupId()){d("#process-group-configuration").data("process-group",{permissions:{canRead:false,canWrite:m.canWriteCurrentGroup()}})}else{d("#process-group-configuration").data("process-group",g.get(v))}y();x(false);z.resolve()}else{z.reject(C,A,B)}})}).promise();var t=q.urls.api+"/flow/process-groups/"+encodeURIComponent(v)+"/controller-services";var u=c.loadControllerServices(t,b());return d.when(w,u).done(function(B,A){var z=A[0];d("#process-group-configuration-last-refreshed").text(z.currentTime)}).fail(f.handleAjaxError)};var n=function(){p.showContent("#process-group-configuration").done(function(){o()});d("#process-group-configuration-tabs").find(".selected-tab").click();i.resetTableSize()};var o=function(){d("#process-group-configuration").removeData("process-group");d("#process-group-configuration-save").mouseout();d("#process-group-id").text("");d("#process-group-name").val("");d("#process-group-comments").val("");d("#process-group-configuration-header-text").text("Process Group Configuration")};var i={init:function(t){c=t;d("#process-group-configuration-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"General",tabContentId:"general-process-group-configuration-tab-content"},{name:"Controller Services",tabContentId:"process-group-controller-services-tab-content"}],select:function(){var v=d("#process-group-configuration").data("process-group");var w=h.isDefinedAndNotNull(v)?v.permissions.canWrite:false;var u=d(this).text();if(u==="General"){d("#flow-cs-availability").hide();d("#add-process-group-configuration-controller-service").hide();if(w){d("#process-group-configuration-save").show()}else{d("#process-group-configuration-save").hide()}}else{d("#flow-cs-availability").show();d("#process-group-configuration-save").hide();if(w){d("#add-process-group-configuration-controller-service").show();d("#process-group-controller-services-tab-content").css("top","32px")}else{d("#add-process-group-configuration-controller-service").hide();d("#process-group-controller-services-tab-content").css("top","0")}i.resetTableSize()}}});k();c.init(b())},resetTableSize:function(){c.resetTableSize(b())},showConfiguration:function(t){return l(t).done(n)},loadConfiguration:function(t){return l(t)},selectControllerService:function(t){var u=b().data("gridInstance");var v=u.getData();var w=v.getRowById(t);u.setSelectedRows([w]);u.scrollRowIntoView(w);d("#process-group-configuration-tabs").find("li:eq(1)").click()}};return i}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.ErrorHandler"],function(c,d,e){return(nf.ConnectionDetails=b(c,d,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ConnectionDetails=b(require("jquery"),require("nf.Common"),require("nf.ErrorHandler")))}else{nf.ConnectionDetails=b(a.$,a.nf.Common,a.nf.ErrorHandler)}}}(this,function(d,b,g){var j=function(o,q,p){if(p.type==="PROCESSOR"){return k(o,q,p)}else{if(p.type==="FUNNEL"){return l(o,q,p)}else{if(p.type==="REMOTE_OUTPUT_PORT"){return f(o,q,p)}else{return n(o,q,p)}}}};var k=function(o,q,p){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/processors/"+encodeURIComponent(p.id),dataType:"json"}).done(function(s){var t=s.component;var u=d('<div class="label"></div>').text(t.name).addClass("ellipsis").attr("title",t.name);var v=d("<div></div>").text(b.substringAfterLast(t.type,".")).addClass("ellipsis").attr("title",b.substringAfterLast(t.type,"."));d("#read-only-connection-source-label").text("From processor");d("#read-only-connection-source").append(u).append(v);d("#read-only-connection-source-group-name").text(q);r.resolve()}).fail(function(w,s,t){if(w.status===403){var u=d('<div class="label"></div>').text(p.name).addClass("ellipsis").attr("title",p.name);var v=d("<div></div>").text("Processor").addClass("ellipsis").attr("title","Processor");d("#read-only-connection-source-label").text("From processor");d("#read-only-connection-source").append(u).append(v);d("#read-only-connection-source-group-name").text(q);r.resolve()}else{r.reject(w,s,t)}})}).promise()};var l=function(o,q,p){return d.Deferred(function(r){d("#read-only-connection-source-label").text("From funnel");d("#read-only-connection-source").text("funnel").attr("title","funnel");d("#read-only-connection-source-group-name").text(q);r.resolve()}).promise()};var f=function(o,q,p){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/remote-process-groups/"+encodeURIComponent(p.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(t.name);r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(p.groupId);r.resolve()}else{r.reject(u,s,t)}})}).promise()};var n=function(o,q,p){return d.Deferred(function(r){if(o===p.groupId){d("#read-only-connection-source-label").text("From input");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(q);r.resolve()}else{d.ajax({type:"GET",url:"../nifi-api/process-groups/"+encodeURIComponent(p.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(t.name);r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-source-label").text("From output");d("#read-only-connection-source").text(p.name).attr("title",p.name);d("#read-only-connection-source-group-name").text(p.groupId);r.resolve()}else{r.reject(u,s,t)}})}}).promise()};var e=function(p,q,o){if(o.type==="PROCESSOR"){return a(p,q,o)}else{if(o.type==="FUNNEL"){return m(p,q,o)}else{if(o.type==="REMOTE_INPUT_PORT"){return i(p,q,o)}else{return c(p,q,o)}}}};var a=function(p,q,o){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/processors/"+encodeURIComponent(o.id),dataType:"json"}).done(function(s){var t=s.component;var u=d('<div class="label"></div>').text(t.name).addClass("ellipsis").attr("title",t.name);var v=d("<div></div>").text(b.substringAfterLast(t.type,".")).addClass("ellipsis").attr("title",b.substringAfterLast(t.type,"."));d("#read-only-connection-target-label").text("To processor");d("#read-only-connection-target").append(u).append(v);d("#read-only-connection-target-group-name").text(q);r.resolve()}).fail(function(w,s,t){if(w.status===403){var u=d('<div class="label"></div>').text(o.name).addClass("ellipsis").attr("title",o.name);var v=d("<div></div>").text("Processor").addClass("ellipsis").attr("title","Processor");d("#read-only-connection-target-label").text("To processor");d("#read-only-connection-target").append(u).append(v);d("#read-only-connection-target-group-name").text(q);r.resolve()}else{r.reject(w,s,t)}})}).promise()};var m=function(p,q,o){return d.Deferred(function(r){d("#read-only-connection-target-label").text("To funnel");d("#read-only-connection-target").text("funnel").attr("title","funnel");d("#read-only-connection-target-group-name").text(q);r.resolve()}).promise()};var i=function(p,q,o){return d.Deferred(function(r){d.ajax({type:"GET",url:"../nifi-api/remote-process-groups/"+encodeURIComponent(o.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(t.name);r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(o.groupId);r.resolve()}else{r.reject(u,s,t)}})}).promise()};var c=function(p,q,o){return d.Deferred(function(r){if(p===o.groupId){d("#read-only-connection-target-label").text("To output");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(q);r.resolve()}else{d.ajax({type:"GET",url:"../nifi-api/process-groups/"+encodeURIComponent(o.groupId),dataType:"json"}).done(function(s){var t=s.component;d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(t.name);r.resolve()}).fail(function(u,s,t){if(u.status===403){d("#read-only-connection-target-label").text("To input");d("#read-only-connection-target").text(o.name).attr("title",o.name);d("#read-only-connection-target-group-name").text(o.groupId);r.resolve()}else{r.reject(u,s,t)}})}}).promise()};var h=function(o){d('<div class="available-relationship-container"></div>').append(d('<div class="relationship-name"></div>').text(o)).appendTo("#read-only-relationship-names")};return{init:function(){d("#connection-details-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Details",tabContentId:"read-only-connection-details-tab-content"},{name:"Settings",tabContentId:"read-only-connection-settings-tab-content"}]});d("#connection-details").modal({headerText:"Connection Details",scrollableContentStyle:"scrollable",buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){d("#connection-details").modal("hide")}}}],handler:{close:function(){d("#read-only-relationship-names").empty();b.clearField("read-only-connection-name");b.clearField("read-only-connection-id");d("#read-only-connection-source-label").text("");d("#read-only-connection-source").empty();d("#read-only-connection-source-group-name").text("");d("#read-only-connection-target-label").text("");d("#read-only-connection-target").empty();d("#read-only-connection-target-group-name").text("");d("#read-only-relationship-names").css("border-width","0").empty();b.clearField("read-only-flow-file-expiration");b.clearField("read-only-back-pressure-object-threshold");b.clearField("read-only-back-pressure-data-size-threshold");b.clearField("read-only-load-balance-strategy");b.clearField("read-only-load-balance-partition-attribute");b.clearField("read-only-load-balance-compression");d("#read-only-prioritizers").empty()},open:function(){b.toggleScrollable(d("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}})},showDetails:function(p,r){var q=d.ajax({type:"GET",url:"../nifi-api/flow/process-groups/"+encodeURIComponent(p),dataType:"json"});var o=d.ajax({type:"GET",url:"../nifi-api/connections/"+encodeURIComponent(r),dataType:"json"});d.when(q,o).done(function(w,u){var v=w[0];var x=u[0];if(x.permissions.canRead){var t=x.component;var z=v.permissions.canRead?v.processGroupFlow.breadcrumb.breadcrumb.name:v.processGroupFlow.id;var y=j(v.id,z,t.source);var s=e(v.id,z,t.destination);d.when(y,s).done(function(){var B=t.availableRelationships;var A=t.selectedRelationships;if(b.isDefinedAndNotNull(B)||b.isDefinedAndNotNull(A)){d.each(B,function(G,F){h(F)});d.each(A,function(H,F){if(d.inArray(F,B)===-1){var I=h(F);d(I).children("div.relationship-name").addClass("undefined")}var G=d("#read-only-relationship-names").children("div");d.each(G.children("div.relationship-name"),function(K,J){var L=d(J);if(L.text()===F){L.css("font-weight","bold")}})});d("#selected-relationship-text").show();d("#read-only-relationship-names-container").show()}else{d("#selected-relationship-text").hide();d("#read-only-relationship-names-container").hide()}b.populateField("read-only-connection-name",t.name);b.populateField("read-only-connection-id",t.id);b.populateField("read-only-flow-file-expiration",t.flowFileExpiration);b.populateField("read-only-back-pressure-object-threshold",t.backPressureObjectThreshold);b.populateField("read-only-back-pressure-data-size-threshold",t.backPressureDataSizeThreshold);b.populateField("read-only-load-balance-strategy",b.getComboOptionText(b.loadBalanceStrategyOptions,t.loadBalanceStrategy));b.populateField("read-only-load-balance-partition-attribute",t.loadBalancePartitionAttribute);b.populateField("read-only-load-balance-compression",b.getComboOptionText(b.loadBalanceCompressionOptions,t.loadBalanceCompression));if(t.loadBalanceStrategy==="PARTITION_BY_ATTRIBUTE"){d("#read-only-load-balance-partition-attribute-setting").show()}else{d("#read-only-load-balance-partition-attribute-setting").hide()}if(t.loadBalanceStrategy==="DO_NOT_LOAD_BALANCE"){d("#read-only-load-balance-compression-setting").hide()}else{d("#read-only-load-balance-compression-setting").show()}if(b.isDefinedAndNotNull(t.prioritizers)&&t.prioritizers.length>0){var E=d("<ol></ol>").css("list-style","decimal inside none");d.each(t.prioritizers,function(F,G){E.append(d("<li></li>").text(b.substringAfterLast(G,".")))});d("#read-only-prioritizers").append(E)}else{var C=d('<span class="unset">No value set</span>');d("#read-only-prioritizers").append(C)}d("#connection-details-tabs").find("li:first").click();d("#connection-details").modal("show");var D=d("#read-only-relationship-names");if(D.is(":visible")&&D.get(0).scrollHeight>Math.round(D.innerHeight())){D.css("border-width","1px")}}).fail(g.handleAjaxError)}}).fail(g.handleAjaxError)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.Common","nf.Dialog","nf.ErrorHandler"],function(e,c,f,d,g){return(nf.StatusHistory=b(e,c,f,d,g))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.StatusHistory=b(require("jquery"),require("d3"),require("nf.Common"),require("nf.Dialog"),require("nf.ErrorHandler")))}else{nf.StatusHistory=b(a.$,a.d3,a.nf.Common,a.nf.Dialog,a.nf.ErrorHandler)}}}(this,function(e,x,h,s,g){var w={nifiInstanceId:"nifi-instance-id",nifiInstanceLabel:"NiFi",type:{processor:"Processor",inputPort:"Input Port",outputPort:"Output Port",processGroup:"Process Group",remoteProcessGroup:"Remote Process Group",connection:"Connection",funnel:"Funnel",template:"Template",label:"Label"},urls:{api:"../nifi-api"}};var v={DURATION:function(z){return h.formatDuration(z)},COUNT:function(z){if(z%1===0){return h.formatInteger(z)}else{return h.formatFloat(z)}},DATA_SIZE:function(z){return h.formatDataSize(z)}};var n=null;var c=null;var q=null;var d=null;var k=function(B,F,D,A,E){e("#status-history-last-refreshed").text(D.generated);var z={groupId:B,id:F,type:A,instances:[]};var C=D.fieldDescriptors;z.details=D.componentDetails;z.selectedDescriptor=h.isUndefined(E)?C[0]:E;if(h.isDefinedAndNotNull(D.aggregateSnapshots)&&D.aggregateSnapshots.length>1){z.instances.push({id:w.nifiInstanceId,label:w.nifiInstanceLabel,snapshots:D.aggregateSnapshots})}else{j();return}e.each(D.nodeSnapshots,function(H,G){if(h.isDefinedAndNotNull(G.statusSnapshots)&&G.statusSnapshots.length>1){z.instances.push({id:G.nodeId,label:G.address+":"+G.apiPort,snapshots:G.statusSnapshots})}});if(z.instances.length>0){e("#status-history-dialog").data("status-history",z);r(z,C)}else{j()}};var j=function(){s.showOkDialog({headerText:"Status History",dialogContent:"Insufficient history, please try again later."})};var r=function(z,A){if(d===null){d={}}e.each(z.instances,function(C,B){B.snapshots.forEach(function(F){var E=new Date();var D=E.getTimezoneOffset()*60*1000;F.timestamp=new Date(F.timestamp+D+n)})});m(A,z.selectedDescriptor)};var m=function(B,A){var z=[];e.each(B,function(C,D){z.push({text:D.label,value:D.field,description:h.escapeHtml(D.description)})});e("#status-history-metric-combo").combo({selectedOption:{value:A.field},options:z,select:function(D){var E=null;e.each(B,function(F,G){if(D.value===G.field){E=G;return false}});if(E!==null){if(q===null||q.field!==E.field){c=null}q=E;var C=e("#status-history-dialog").data("status-history");C.selectedDescriptor=E;e("#status-history-dialog").data("status-history",C);l()}}});e("#status-history-dialog").modal("show")};var a=function(){return e("#status-history-chart-container").parent().outerHeight()-e("#status-history-chart-control-container").outerHeight()-parseInt(e("#status-history-chart-control-container").css("margin-top"),10)};var y=function(){return e("body").height()-e("#status-history-chart-control-container").outerHeight()-e("#status-history-refresh-container").outerHeight()-parseInt(e("#status-history-chart-control-container").css("margin-top"),10)-parseInt(e(".dialog-content").css("top"))-parseInt(e(".dialog-content").css("bottom"))};var u=function(){return e("body").width()-e("#status-history-details").innerWidth()-parseInt(e("#status-history-dialog").css("left"),10)-parseInt(e(".dialog-content").css("left"))-parseInt(e(".dialog-content").css("right"))};var l=function(){var ah=e("#status-history-dialog");if(ah.is(":visible")){var aa=ah.data("status-history");var ag=aa.selectedDescriptor;e("#status-history-details").empty();var C=o("Status History");x.map(aa.details).each(function(aw,av){i(C,av,aw)});var E={top:15,right:20,bottom:25,left:75};var X=x.scaleOrdinal(x.schemeCategory10);var B=[];e.each(aa.instances,function(aw,av){B.push(av.label)});X.domain(B);var ar=[];e.each(aa.instances,function(aw,av){if(h.isUndefinedOrNull(d[av.id])){d[av.id]=true}ar.push({id:av.id,label:av.label,values:e.map(av.snapshots,function(ax){return{timestamp:ax.timestamp,value:ax.statusMetrics[ag.field]}}),visible:d[av.id]===true})});var O=function(av){if(av.getMilliseconds()){return x.timeFormat(":%S.%L")(av)}else{if(av.getSeconds()){return x.timeFormat(":%S")(av)}else{if(av.getMinutes()||av.getHours()){return x.timeFormat("%H:%M")(av)}else{if(av.getDay()&&av.getDate()!==1){return x.timeFormat("%a %d")(av)}else{if(av.getDate()!==1){return x.timeFormat("%b %d")(av)}else{if(av.getMonth()){return x.timeFormat("%B")(av)}else{return x.timeFormat("%Y")(av)}}}}}}};var N=e("#status-history-chart-container").empty();if(N.hasClass("ui-resizable")){N.resizable("destroy");N.removeAttr("style")}N.height(a());var z=N.outerWidth()-E.left-E.right;var A=N.outerHeight()-E.top-E.bottom;V=e("#status-history-container").width();if(z>V){z=V}am=y();if(A>am){A=am}var ae=x.scaleTime().range([0,z]);var U=x.axisBottom(ae).ticks(5).tickFormat(O);var ad=x.scaleLinear().range([A,0]);var F=x.axisLeft(ad).tickFormat(v[ag.formatter]);var G=x.line().curve(x.curveMonotoneX).x(function(av){return ae(av.timestamp)}).y(function(av){return ad(av.value)});var M=x.select("#status-history-chart-container").append("svg").attr("style","pointer-events: none;").attr("width",N.parent().width()).attr("height",N.innerHeight());var H=M.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",z).attr("height",A);var au=M.append("g").attr("transform","translate("+E.left+", "+E.top+")");var D=x.min(ar,function(av){return x.min(av.values,function(aw){return aw.timestamp})});var K=x.max(ar,function(av){return x.max(av.values,function(aw){return aw.timestamp})});i(C,"Start",h.formatDateTime(D));i(C,"End",h.formatDateTime(K));ae.domain([D,K]);ad.domain([p(ar),t(ar)]);au.append("g").attr("class","x axis").attr("transform","translate(0, "+A+")").call(U);au.append("g").attr("class","y axis").call(F).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").attr("text-anchor","end").text(ag.label);var ab=au.selectAll(".status").data(ar).enter().append("g").attr("clip-path","url(#clip)").attr("class","status");ab.append("path").attr("class",function(av){return"chart-line chart-line-"+av.id}).attr("d",function(av){return G(av.values)}).attr("stroke",function(av){return X(av.label)}).classed("hidden",function(av){return av.visible===false}).append("title").text(function(av){return av.label});ab.each(function(av){var aw=x.select(this).append("g").attr("class",function(){return"mark-group mark-group-"+av.id}).classed("hidden",function(ax){return ax.visible===false});aw.selectAll("circle.mark").data(av.values).enter().append("circle").attr("style","pointer-events: all;").attr("class","mark").attr("cx",function(ax){return ae(ax.timestamp)}).attr("cy",function(ax){return ad(ax.value)}).attr("fill",function(){return X(av.label)}).attr("r",1.5).append("title").text(function(ax){return av.label+" -- "+v[ag.formatter](ax.value)})});M.attr("width",N.parent().width()).attr("height",N.innerHeight());H.attr("width",z).attr("height",A);au.select(".x.axis").attr("transform","translate(0, "+A+")");var T=e("#status-history-chart-control-container").empty();var R=T.innerHeight()-E.top-E.bottom;var ak=x.scaleTime().range([0,z]);var J=x.axisBottom(ak).ticks(5).tickFormat(O);var ao=x.scaleLinear().range([R,0]);var ai=x.axisLeft(ao).tickValues(ad.domain()).tickFormat(v[ag.formatter]);var Q=x.line().curve(x.curveMonotoneX).x(function(av){return ak(av.timestamp)}).y(function(av){return ao(av.value)});var af=x.select("#status-history-chart-control-container").append("svg").attr("width",N.parent().width()).attr("height",R+E.top+E.bottom);var W=af.append("g").attr("transform","translate("+E.left+", "+E.top+")");ak.domain(ae.domain());ao.domain(ad.domain());W.append("g").attr("class","x axis").attr("transform","translate(0, "+R+")").call(J);W.append("g").attr("class","y axis").call(ai);var at=W.selectAll(".status").data(ar).enter().append("g").attr("class","status");at.append("path").attr("class",function(av){return"chart-line chart-line-"+av.id}).attr("d",function(av){return Q(av.values)}).attr("stroke",function(av){return X(av.label)}).classed("hidden",function(av){return d[av.id]===false}).append("title").text(function(av){return av.label});var L=function(){var aA=e.map(ar,function(aG){var aE=ae.domain();var aF=ad.domain();var aH=e.extend({},aG);return e.extend(aH,{values:e.grep(aG.values,function(aI){return aI.timestamp.getTime()>=aE[0].getTime()&&aI.timestamp.getTime()<=aE[1].getTime()&&aI.value>=aF[0]&&aI.value<=aF[1]})})});var av=e.grep(aA,function(aE){return aE.id!==w.nifiInstanceId&&aE.visible&&aE.values.length>0});var az=av.length===0?"NA":v[ag.formatter](p(av));var ay=av.length===0?"NA":v[ag.formatter](f(av));var aw=av.length===0?"NA":v[ag.formatter](t(av));e("#node-aggregate-statistics").text(az+" / "+aw+" / "+ay);var aC=e.grep(aA,function(aE){return aE.id===w.nifiInstanceId&&aE.visible&&aE.values.length>0});var aD=aC.length===0?"NA":v[ag.formatter](p(aC));var aB=aC.length===0?"NA":v[ag.formatter](f(aC));var ax=aC.length===0?"NA":v[ag.formatter](t(aC));e("#cluster-aggregate-statistics").text(aD+" / "+ax+" / "+aB)};var aq=function(av,aw){ae.domain(av);ad.domain(aw);ab.selectAll(".chart-line").attr("d",function(ax){return G(ax.values)});ab.selectAll("circle.mark").attr("cx",function(ax){return ae(ax.timestamp)}).attr("cy",function(ax){return ad(ax.value)}).attr("r",function(){return x.brushSelection(P.node())===null?1.5:4});au.select(".x.axis").call(U);au.select(".y.axis").call(F)};var I=function(){c=x.brushSelection(P.node());var aw,av;if(c===null){var ax=e.grep(ar,function(ay){return ay.visible});if(ax.length===0){av=ao.domain()}else{av=[x.min(ax,function(ay){return x.min(ay.values,function(az){return az.value})}),x.max(ax,function(ay){return x.max(ay.values,function(az){return az.value})})]}aw=ak.domain()}else{aw=[c[0][0],c[1][0]].map(ak.invert,ak);av=[c[1][1],c[0][1]].map(ao.invert,ao)}aq(aw,av);L()};var al=x.brush().extent([[ak.range()[0],ao.range()[1]],[ak.range()[1],ao.range()[0]]]).on("brush",I);var P=W.append("g").attr("class","brush").on("click",I).call(al);if(h.isDefinedAndNotNull(c)){al=al.move(P,c)}W.select("rect.selection").attr("style","pointer-events: all;").on("dblclick",function(){if(c!==null){var av=ao.range();al.move(P,[[c[0][0],av[1]],[c[1][0],av[0]]])}});var ac=e.grep(ar,function(av){return av.id!==w.nifiInstanceId}).sort(function(aw,av){return aw.label<av.label?-1:aw.label>av.label?1:0});var ap=function(aw,av){var ay=e("<div></div>").addClass("legend-label nf-checkbox-label").css("color",X(av.label)).text(av.label).ellipsis();var ax=e('<div class="nf-checkbox"></div>').on("click",function(){var az=x.selectAll("path.chart-line-"+av.id);var aB=x.select("g.mark-group-"+av.id);var aA=aB.classed("hidden");az.classed("hidden",function(){return !aA});aB.classed("hidden",function(){return !aA});av.visible=aA;d[av.id]=av.visible;I()}).addClass(av.visible?"checkbox-checked":"checkbox-unchecked");e('<div class="legend-entry"></div>').append(ax).append(ay).on("mouseenter",function(){x.selectAll("path.chart-line-"+av.id).classed("over",true)}).on("mouseleave",function(){x.selectAll("path.chart-line-"+av.id).classed("over",false)}).appendTo(aw)};var Z=e.grep(ar,function(av){return av.id===w.nifiInstanceId});var aj=o("NiFi");i(aj,"Min / Max / Mean","","cluster-aggregate-statistics");ap(aj,Z[0]);if(ac.length>0){var Y=o("Nodes");i(Y,"Min / Max / Mean","","node-aggregate-statistics");e.each(ac,function(aw,av){ap(Y,av)})}I();var V,am,S,an;N.append('<div class="ui-resizable-handle ui-resizable-se"></div>').resizable({minWidth:425,minHeight:150,handles:{se:".ui-resizable-se"},resize:function(ax,aw){an=e("#status-history-dialog");var av={};if(h.isDefinedAndNotNull(an.data("nf-dialog"))){av=an.data("nf-dialog")}av["min-width"]=(an.width()/e(window).width())*100+"%";av["min-height"]=(an.height()/e(window).height())*100+"%";av.responsive["fullscreen-width"]=an.outerWidth()+"px";av.responsive["fullscreen-height"]=an.outerHeight()+"px";V=u();if(aw.helper.width()>V){aw.helper.width(V);av.responsive["fullscreen-width"]=e(window).width()+"px";av["min-width"]="100%"}am=y();if(aw.helper.height()>am){aw.helper.height(am);av.responsive["fullscreen-height"]=e(window).height()+"px";av["min-height"]="100%"}S=a();if(aw.helper.height()<S){aw.helper.height(S)}av["min-width"]=(parseInt(av["min-width"],10)>=100)?"100%":av["min-width"];av["min-height"]=(parseInt(av["min-height"],10)>=100)?"100%":av["min-height"];an.data("nfDialog",av);an.css("min-width",(N.outerWidth()+e("#status-history-details").outerWidth()+40));an.css("min-height",(N.outerHeight()+e("#status-history-refresh-container").outerHeight()+e("#status-history-chart-control-container").outerHeight()+e(".dialog-buttons").outerHeight()+e(".dialog-header").outerHeight()+40+5));an.center()},stop:l})}};var p=function(z){return x.min(z,function(A){return x.min(A.values,function(B){return B.value})})};var t=function(z){return x.max(z,function(A){return x.max(A.values,function(B){return B.value})})};var f=function(A){var B=0;var z=x.sum(A,function(C){B+=C.values.length;return x.sum(C.values,function(D){return D.value})});return z/B};var o=function(A){var z=e('<div class="status-history-detail"></div>').appendTo("#status-history-details");e('<div class="detail-container-label"></div>').text(A).appendTo(z);return e("<div></div>").appendTo(z)};var i=function(A,C,D,E){var B=e('<div class="detail-item"></div>').appendTo(A);e('<div class="setting-name"></div>').text(C).appendTo(B);var z=e('<div class="setting-field"></div>').text(D).appendTo(B);if(h.isDefinedAndNotNull(E)){z.attr("id",E)}};var b={init:function(z){n=z;e("#status-history-refresh-button").click(function(){var A=e("#status-history-dialog").data("status-history");if(A!==null){if(A.type===w.type.processor){b.showProcessorChart(A.groupId,A.id,A.selectedDescriptor)}else{if(A.type===w.type.processGroup){b.showProcessGroupChart(A.groupId,A.id,A.selectedDescriptor)}else{if(A.type===w.type.remoteProcessGroup){b.showRemoteProcessGroupChart(A.groupId,A.id,A.selectedDescriptor)}else{b.showConnectionChart(A.groupId,A.id,A.selectedDescriptor)}}}}});e("#status-history-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Status History",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){e("#status-history-dialog").removeData("status-history");e("#status-history-chart-container").empty();e("#status-history-chart-control-container").empty();e("#status-history-details").empty();c=null;q=null;d=null},open:l}});e(window).on("resize",function(A){if(A.target===window){l()}h.toggleScrollable(e("#status-history-details").get(0))})},showConnectionChart:function(z,A,B){e.ajax({type:"GET",url:w.urls.api+"/flow/connections/"+encodeURIComponent(A)+"/status/history",dataType:"json"}).done(function(C){k(z,A,C.statusHistory,w.type.connection,B)}).fail(g.handleAjaxError)},showProcessorChart:function(z,B,A){e.ajax({type:"GET",url:w.urls.api+"/flow/processors/"+encodeURIComponent(B)+"/status/history",dataType:"json"}).done(function(C){k(z,B,C.statusHistory,w.type.processor,A)}).fail(g.handleAjaxError)},showProcessGroupChart:function(A,z,B){e.ajax({type:"GET",url:w.urls.api+"/flow/process-groups/"+encodeURIComponent(z)+"/status/history",dataType:"json"}).done(function(C){k(A,z,C.statusHistory,w.type.processGroup,B)}).fail(g.handleAjaxError)},showRemoteProcessGroupChart:function(A,z,B){e.ajax({type:"GET",url:w.urls.api+"/flow/remote-process-groups/"+encodeURIComponent(z)+"/status/history",dataType:"json"}).done(function(C){k(A,z,C.statusHistory,w.type.remoteProcessGroup,B)}).fail(g.handleAjaxError)}};return b}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["angular"],function(c){return(nf.ng.Bridge=b(c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.Bridge=b(require("angular")))}else{nf.ng.Bridge=b(a.angular)}}}(this,function(a){function b(){this.rootScope;this.injector}b.prototype={constructor:b,call:function(e,d){var h=e.split(".");var i=this.rootScope;a.forEach(h,function(j){i=i[j]});var f=d.split(".");d=this.rootScope;a.forEach(f,function(j){d=d[j]});var g=Array.prototype.slice.call(arguments,2);var c=d.apply(i,g);if(c){return c}},get:function(c){var d=c.split(".");var e=this.rootScope;a.forEach(d,function(f){e=e[f]});return e},digest:function(){this.rootScope.$digest()}};return new b()}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","Slick","nf.Common","nf.ErrorHandler","nf.StatusHistory","nf.ProcessorDetails","nf.ConnectionDetails","nf.ng.Bridge"],function(f,i,g,h,d,j,c,e){return(nf.SummaryTable=b(f,i,g,h,d,j,c,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.SummaryTable=b(require("jquery"),require("Slick"),require("nf.Common"),require("nf.ErrorHandler"),require("nf.StatusHistory"),require("nf.ProcessorDetails"),require("nf.ConnectionDetails"),require("nf.ng.Bridge")))}else{nf.SummaryTable=b(a.$,a.Slick,a.nf.Common,a.nf.ErrorHandler,a.nf.StatusHistory,a.nf.ProcessorDetails,a.nf.ConnectionDetails,a.nf.ng.Bridge)}}}(this,function(e,v,i,h,c,p,o,B){var y={urls:{api:"../nifi-api",status:"../nifi-api/flow/process-groups/root/status",systemDiagnostics:"../nifi-api/system-diagnostics",flowConfig:"../nifi-api/flow/config"}};var A=function(D,C){if(top!==window){if(i.isDefinedAndNotNull(parent.nf)&&i.isDefinedAndNotNull(parent.nf.CanvasUtils)&&i.isDefinedAndNotNull(parent.nf.Shell)){parent.nf.CanvasUtils.showComponent(D,C);parent.$("#shell-close-button").click()}}};var q=function(ap){e("#summary-filter").keyup(function(){z()});e("#summary-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Processors",tabContentId:"processor-summary-tab-content"},{name:"Input Ports",tabContentId:"input-port-summary-tab-content"},{name:"Output Ports",tabContentId:"output-port-summary-tab-content"},{name:"Remote Process Groups",tabContentId:"remote-process-group-summary-tab-content"},{name:"Connections",tabContentId:"connection-summary-tab-content"},{name:"Process Groups",tabContentId:"process-group-summary-tab-content"}],select:function(){var a8=e(this).text();if(a8==="Processors"){var a7=e("#processor-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(a7)){a7.resizeCanvas();e("#displayed-items").text(i.formatInteger(a7.getData().getLength()));e("#total-items").text(i.formatInteger(a7.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"},{text:"by type",value:"type"}],select:function(bd){z()}})}else{if(a8==="Connections"){var a6=e("#connection-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(a6)){a6.resizeCanvas();e("#displayed-items").text(i.formatInteger(a6.getData().getLength()));e("#total-items").text(i.formatInteger(a6.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by source",value:"sourceName"},{text:"by name",value:"name"},{text:"by destination",value:"destinationName"}],select:function(bd){z()}})}else{if(a8==="Input Ports"){var bc=e("#input-port-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bc)){bc.resizeCanvas();e("#displayed-items").text(i.formatInteger(bc.getData().getLength()));e("#total-items").text(i.formatInteger(bc.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bd){z()}})}else{if(a8==="Output Ports"){var bb=e("#output-port-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bb)){bb.resizeCanvas();e("#displayed-items").text(i.formatInteger(bb.getData().getLength()));e("#total-items").text(i.formatInteger(bb.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bd){z()}})}else{if(a8==="Remote Process Groups"){var ba=e("#remote-process-group-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(ba)){ba.resizeCanvas();e("#displayed-items").text(i.formatInteger(ba.getData().getLength()));e("#total-items").text(i.formatInteger(ba.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"},{text:"by uri",value:"targetUri"}],select:function(bd){z()}})}else{var a9=e("#process-group-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(a9)){a9.resizeCanvas();e("#displayed-items").text(i.formatInteger(a9.getData().getLength()));e("#total-items").text(i.formatInteger(a9.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bd){z()}})}}}}}e("#summary-filter").val("");z()}});var aD=function(bb,a7,ba,a9,a6){var a8='<div title="View Processor Details" class="pointer show-processor-details fa fa-info-circle"></div>';if(!i.isEmpty(a6.bulletins)){a8+='<div class="has-bulletins fa fa-sticky-note-o"></div><span class="hidden row-id">'+i.escapeHtml(a6.id)+"</span>"}return a8};var aw=function(bb,a7,ba,a9,a6){var a8="";if(ap&&a6.executionNode==="PRIMARY"){a8+='<div class="is-primary-icon" title="This component is only scheduled to execute on the Primary Node">P</div>'}a8+=i.escapeHtml(ba);return a8};var aB=function(ba,a7,a9,a8,a6){return i.escapeHtml(a6.read)+" / "+i.escapeHtml(a6.written)};var Z=function(ba,a7,a9,a8,a6){return i.formatInteger(a6.tasks)+" / "+i.escapeHtml(a6.tasksDuration)};var C=function(ba,a7,a9,a8,a6){return i.formatValue(a9)};var a5=function(be,bc,bb,a8,a6){var a9="";var ba="";if(a6.terminatedThreadCount>0){a9="("+a6.activeThreadCount+" / "+a6.terminatedThreadCount+")";ba="Threads: (Active / Terminated)"}else{if(a6.activeThreadCount>0){a9="("+a6.activeThreadCount+")";ba="Active Threads"}}var a7;switch(bb.toLowerCase()){case"running":a7="fa fa-play running";break;case"stopped":a7="fa fa-stop stopped";break;case"enabled":a7="fa fa-flash enabled";break;case"disabled":a7="icon icon-enable-false disabled";break;case"validating":a7="fa fa-spin fa-circle-notch validating";break;case"invalid":a7="fa fa-warning invalid";break;default:a7=""}var bd='<div layout="row"><div class="'+a7+'"></div><div class="status-text">'+i.escapeHtml(bb)+'</div><div style="float: left; margin-left: 4px;" title="'+ba+'">'+i.escapeHtml(a9)+"</div></div>";return bd};var a0={id:"name",field:"name",name:"Name",formatter:aw,sortable:true,resizable:true};var aR={id:"runStatus",field:"runStatus",name:"Run Status",formatter:a5,sortable:true};var at={id:"input",field:"input",name:'<span class="input-title">In</span>&nbsp;/&nbsp;<span class="input-size-title">Size</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aA={id:"io",field:"io",name:'<span class="read-title">Read</span>&nbsp;/&nbsp;<span class="written-title">Write</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Data size in the last 5 min",formatter:aB,sortable:true,defaultSortAsc:false,resizable:true};var a1={id:"output",field:"output",name:'<span class="output-title">Out</span>&nbsp;/&nbsp;<span class="output-size-title">Size</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var ay={id:"tasks",field:"tasks",name:'<span class="tasks-title">Tasks</span>&nbsp;/&nbsp;<span class="time-title">Time</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / duration in the last 5 min",formatter:Z,sortable:true,defaultSortAsc:false,resizable:true};var aC=[{id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:aD,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"},a0,{id:"type",field:"type",name:"Type",sortable:true,resizable:true,formatter:i.genericValueFormatter},{id:"parentGroup",field:"parentProcessGroupName",name:"Process Group",sortable:true,resizable:true,formatter:i.genericValueFormatter,toolTip:"Parent Process Group name"},aR,at,aA,a1,ay];var aU=(top!==window);if(ap||aU||i.SUPPORTS_SVG){var aY=function(bb,a7,ba,a9,a6){var a8="";if(aU){a8+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Processor in '+i.escapeHtml(a6.processGroupNamePath)+'"></div>'}if(i.SUPPORTS_SVG){a8+='<div class="pointer show-processor-status-history fa fa-area-chart" title="View Status History"></div>'}if(ap){a8+='<div class="pointer show-cluster-processor-summary fa fa-cubes" title="View Processor Details"></div>'}return a8};aC.push({id:"actions",name:"&nbsp;",formatter:aY,resizable:false,sortable:false,width:75,maxWidth:75})}var au={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aE=new v.Data.DataView({inlineFilters:false});aE.setItems([]);aE.setFilterArgs({searchString:"",property:"name"});aE.setFilter(l);x("processor-summary-table",{columnId:"name",sortAsc:true},aE);var a2=new v.Grid("#processor-summary-table",aE,aC,au);a2.setSelectionModel(new v.RowSelectionModel());a2.registerPlugin(new v.AutoTooltips());a2.setSortColumn("name",true);a2.onSort.subscribe(function(a7,a6){x("processor-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},aE)});a2.onClick.subscribe(function(a9,a6){var a8=e(a9.target);var a7=aE.getItem(a6.row);if(a2.getColumns()[a6.cell].id==="actions"){if(a8.hasClass("go-to")){A(a7.groupId,a7.id)}else{if(a8.hasClass("show-processor-status-history")){c.showProcessorChart(a7.groupId,a7.id)}else{if(a8.hasClass("show-cluster-processor-summary")){m(a7.groupId,a7.id);e("#summary-loading-container").hide();e("#cluster-processor-summary-dialog").modal("show");K.resizeCanvas()}}}}else{if(a2.getColumns()[a6.cell].id==="moreDetails"){if(a8.hasClass("show-processor-details")){p.showDetails(a7.groupId,a7.id)}}}});aE.onRowCountChanged.subscribe(function(a7,a6){a2.updateRowCount();a2.render();if(e("#processor-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(a6.current))}});aE.onRowsChanged.subscribe(function(a7,a6){a2.invalidateRows(a6.rows);a2.render()});e("#processor-summary-table").data("gridInstance",a2).on("mouseenter","div.slick-cell",function(ba){var a7=e(this).find("div.has-bulletins");if(a7.length&&!a7.data("qtip")){var bb=e(this).find("span.row-id").text();var a6=aE.getItemById(bb);var a9=i.getFormattedBulletins(a6.bulletins);var a8=i.formatUnorderedList(a9);if(i.isDefinedAndNotNull(a8)){a7.qtip(e.extend({},i.config.tooltipConfig,{content:a8,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-processor-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Processor Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-processor-id").text("");e("#cluster-processor-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-processor-refresh-button").click(function(){m(e("#cluster-processor-group-id").text(),e("#cluster-processor-id").text())});var J=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aR,at,aA,a1,ay];var aX={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aN=new v.Data.DataView({inlineFilters:false});aN.setItems([]);x("cluster-processor-summary-table",{columnId:"node",sortAsc:true},aN);var K=new v.Grid("#cluster-processor-summary-table",aN,J,aX);K.setSelectionModel(new v.RowSelectionModel());K.registerPlugin(new v.AutoTooltips());K.setSortColumn("node",true);K.onSort.subscribe(function(a7,a6){x("cluster-processor-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},aN)});aN.onRowCountChanged.subscribe(function(a7,a6){K.updateRowCount();K.render()});aN.onRowsChanged.subscribe(function(a7,a6){K.invalidateRows(a6.rows);K.render()});e("#cluster-processor-summary-table").data("gridInstance",K);var aK=function(ba,a7,a9,a8,a6){return'<div class="pointer show-connection-details fa fa-info-circle" title="View Connection Details"></div>'};var R=function(bc,a8,bb,a9,a7){var a6="NA";if(i.isDefinedAndNotNull(a7.percentUseCount)){a6=a7.percentUseCount+"%"}var ba="NA";if(i.isDefinedAndNotNull(a7.percentUseBytes)){ba=a7.percentUseBytes+"%"}return i.escapeHtml(a6)+" / "+i.escapeHtml(ba)};var aT={id:"queued",field:"queued",name:'<span class="queued-title">Queue</span>&nbsp;/&nbsp;<span class="queued-size-title">Size</span>',sortable:true,defaultSortAsc:false,resize:true,formatter:i.genericValueFormatter};var Q={id:"backpressure",field:"backpressure",name:'<span class="backpressure-object-title">Queue</span>&nbsp;/&nbsp;<span class="backpressure-data-size-title">Size</span> Threshold',sortable:true,defaultSortAsc:false,formatter:R,resize:true};var aq=[{id:"moreDetails",name:"&nbsp;",sortable:false,resizable:false,formatter:aK,width:50,maxWidth:50},{id:"sourceName",field:"sourceName",name:"Source Name",sortable:true,resizable:true,formatter:i.genericValueFormatter},{id:"name",field:"name",name:"Name",sortable:true,resizable:true,formatter:C},{id:"destinationName",field:"destinationName",name:"Destination Name",sortable:true,resizable:true,formatter:i.genericValueFormatter},at,aT,Q,a1];if(ap||aU||i.SUPPORTS_SVG){var F=function(bb,a7,ba,a9,a6){var a8="";if(aU){a8+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Connection"></div>'}if(i.SUPPORTS_SVG){a8+='<div class="pointer show-connection-status-history fa fa-area-chart" title="View Status History"></div>'}if(ap){a8+='<div class="pointer show-cluster-connection-summary fa fa-cubes" title="View Connection Details"></div>'}return a8};aq.push({id:"actions",name:"&nbsp;",formatter:F,resizable:false,sortable:false,width:75,maxWidth:75})}var X={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var ai=new v.Data.DataView({inlineFilters:false});ai.setItems([]);ai.setFilterArgs({searchString:"",property:"sourceName"});ai.setFilter(l);x("connection-summary-table",{columnId:"sourceName",sortAsc:true},ai);var aH=new v.Grid("#connection-summary-table",ai,aq,X);aH.setSelectionModel(new v.RowSelectionModel());aH.registerPlugin(new v.AutoTooltips());aH.setSortColumn("sourceName",true);aH.onSort.subscribe(function(a7,a6){x("connection-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},ai)});aH.onClick.subscribe(function(a9,a6){var a8=e(a9.target);var a7=ai.getItem(a6.row);if(aH.getColumns()[a6.cell].id==="actions"){if(a8.hasClass("go-to")){A(a7.groupId,a7.id)}else{if(a8.hasClass("show-connection-status-history")){c.showConnectionChart(a7.groupId,a7.id)}else{if(a8.hasClass("show-cluster-connection-summary")){b(a7.groupId,a7.id);e("#summary-loading-container").hide();e("#cluster-connection-summary-dialog").modal("show");ae.resizeCanvas()}}}}else{if(aH.getColumns()[a6.cell].id==="moreDetails"){if(a8.hasClass("show-connection-details")){o.showDetails(a7.groupId,a7.id)}}}});ai.onRowCountChanged.subscribe(function(a7,a6){aH.updateRowCount();aH.render();if(e("#connection-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(a6.current))}});ai.onRowsChanged.subscribe(function(a7,a6){aH.invalidateRows(a6.rows);aH.render()});e("#connection-summary-table").data("gridInstance",aH);e("#cluster-connection-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Connection Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-connection-id").text("");e("#cluster-connection-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-connection-refresh-button").click(function(){b(e("#cluster-connection-group-id").text(),e("#cluster-connection-id").text())});var M=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},at,aT,Q,a1];var G={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var E=new v.Data.DataView({inlineFilters:false});E.setItems([]);x("cluster-connection-summary-table",{columnId:"node",sortAsc:true},E);var ae=new v.Grid("#cluster-connection-summary-table",E,M,G);ae.setSelectionModel(new v.RowSelectionModel());ae.registerPlugin(new v.AutoTooltips());ae.setSortColumn("node",true);ae.onSort.subscribe(function(a7,a6){x("cluster-connection-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},E)});E.onRowCountChanged.subscribe(function(a7,a6){ae.updateRowCount();ae.render()});E.onRowsChanged.subscribe(function(a7,a6){ae.invalidateRows(a6.rows);ae.render()});e("#cluster-connection-summary-table").data("gridInstance",ae);var P=function(bb,a7,ba,a9,a6){var a8="";if(!i.isEmpty(a6.bulletins)){a8+='<div class="has-bulletins fa fa-sticky-note-o" style="margin-left: 5px; float: left;"></div><span class="hidden row-id">'+i.escapeHtml(a6.id)+"</span>"}return a8};var aI={id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:P,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"};var ab={id:"transferred",field:"transferred",name:'<span class="transferred-title">Transferred</span>&nbsp;/&nbsp;<span class="transferred-size-title">Size</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size transferred to and from connections in the last 5 min",resizable:true,defaultSortAsc:false,sortable:true,formatter:i.genericValueFormatter};var Y={id:"sent",field:"sent",name:'<span class="sent-title">Sent</span>&nbsp;/&nbsp;<span class="sent-size-title">Size</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aF={id:"received",field:"received",name:'<span class="received-title">Received</span>&nbsp;/&nbsp;<span class="received-size-title">Size</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aS=function(bc,a7,bb,a8,a6){var ba,a9;switch(bb){case"UP_TO_DATE":ba="fa fa-check up-to-date";a9="Up to date";break;case"LOCALLY_MODIFIED":ba="fa fa-asterisk locally-modified";a9="Locally modified";break;case"STALE":ba="fa fa-arrow-circle-up stale";a9="Stale";break;case"LOCALLY_MODIFIED_AND_STALE":ba="fa fa-exclamation-circle locally-modified-and-stale";a9="Locally modified and stale";break;case"SYNC_FAILURE":ba="fa fa-question sync-failure";a9="Sync failure";break;default:ba="";a9=""}return'<div layout="row"><div class="'+ba+'"></div><div class="status-text">'+a9+"</div></div>"};var N=[aI,{id:"name",field:"name",name:"Name",sortable:true,resizable:true,formatter:C},{id:"versionedFlowState",field:"versionedFlowState",name:"Version State",sortable:true,resizable:true,formatter:aS},ab,at,aA,a1,Y,aF];if(ap||aU||i.SUPPORTS_SVG){var aZ=function(bb,a7,ba,a9,a6){var a8="";if(aU&&a6.groupId!==null){a8+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Process Group"></div>'}if(i.SUPPORTS_SVG){a8+='<div class="pointer show-process-group-status-history fa fa-area-chart" title="View Status History"></div>'}if(ap){a8+='<div class="pointer show-cluster-process-group-summary fa fa-cubes" title="View Process Group Details"></div>'}return a8};N.push({id:"actions",name:"&nbsp;",formatter:aZ,resizable:false,sortable:false,width:75,maxWidth:75})}var ad={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var ar=new v.Data.DataView({inlineFilters:false});ar.setItems([]);ar.setFilterArgs({searchString:"",property:"name"});ar.setFilter(l);x("process-group-summary-table",{columnId:"name",sortAsc:true},ar);var aP=new v.Grid("#process-group-summary-table",ar,N,ad);aP.setSelectionModel(new v.RowSelectionModel());aP.registerPlugin(new v.AutoTooltips());aP.setSortColumn("name",true);aP.onSort.subscribe(function(a7,a6){x("process-group-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},ar)});aP.onClick.subscribe(function(a9,a6){var a8=e(a9.target);var a7=ar.getItem(a6.row);if(aP.getColumns()[a6.cell].id==="actions"){if(a8.hasClass("go-to")){if(i.isDefinedAndNotNull(parent.nf)&&i.isDefinedAndNotNull(parent.nf.ProcessGroup)&&i.isDefinedAndNotNull(parent.nf.Shell)){parent.nf.ProcessGroup.enterGroup(a7.id);parent.$("#shell-close-button").click()}}else{if(a8.hasClass("show-process-group-status-history")){c.showProcessGroupChart(a7.groupId,a7.id)}else{if(a8.hasClass("show-cluster-process-group-summary")){n(a7.id);e("#summary-loading-container").hide();e("#cluster-process-group-summary-dialog").modal("show");V.resizeCanvas()}}}}});ar.onRowCountChanged.subscribe(function(a7,a6){aP.updateRowCount();aP.render();if(e("#process-group-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(a6.current))}});ar.onRowsChanged.subscribe(function(a7,a6){aP.invalidateRows(a6.rows);aP.render()});e("#process-group-summary-table").data("gridInstance",aP).on("mouseenter","div.slick-cell",function(bb){var a8=e(this).find("div.has-bulletins");if(a8.length&&!a8.data("qtip")){var a6=e(this).find("span.row-id").text();var a7=ar.getItemById(a6);var ba=i.getFormattedBulletins(a7.bulletins);var a9=i.formatUnorderedList(ba);if(i.isDefinedAndNotNull(a9)){a8.qtip(e.extend({},i.config.tooltipConfig,{content:a9,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-process-group-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Process Group Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-process-group-id").text("");e("#cluster-process-group-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-process-group-refresh-button").click(function(){n(e("#cluster-process-group-id").text())});var aj=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},ab,at,aA,a1,Y,aF];var az={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aW=new v.Data.DataView({inlineFilters:false});aW.setItems([]);x("cluster-processor-summary-table",{columnId:"node",sortAsc:true},aW);var V=new v.Grid("#cluster-process-group-summary-table",aW,aj,az);V.setSelectionModel(new v.RowSelectionModel());V.registerPlugin(new v.AutoTooltips());V.setSortColumn("node",true);V.onSort.subscribe(function(a7,a6){x("cluster-process-group-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},aW)});aW.onRowCountChanged.subscribe(function(a7,a6){V.updateRowCount();V.render()});aW.onRowsChanged.subscribe(function(a7,a6){V.invalidateRows(a6.rows);V.render()});e("#cluster-process-group-summary-table").data("gridInstance",V);var a4=[aI,a0,aR,a1];if(ap||aU){var am=function(bb,a7,ba,a9,a6){var a8="";if(aU){a8+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Input Port"></div>'}if(ap){a8+='<div class="pointer show-cluster-input-port-summary fa fa-cubes" title="View Input Port Details"></div>'}return a8};a4.push({id:"actions",name:"&nbsp;",formatter:am,resizable:false,sortable:false,width:75,maxWidth:75})}var ah={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var H=new v.Data.DataView({inlineFilters:false});H.setItems([]);H.setFilterArgs({searchString:"",property:"name"});H.setFilter(l);x("input-port-summary-table",{columnId:"name",sortAsc:true},H);var ag=new v.Grid("#input-port-summary-table",H,a4,ah);ag.setSelectionModel(new v.RowSelectionModel());ag.registerPlugin(new v.AutoTooltips());ag.setSortColumn("name",true);ag.onSort.subscribe(function(a7,a6){x("input-port-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},H)});ag.onClick.subscribe(function(a9,a6){var a8=e(a9.target);var a7=H.getItem(a6.row);if(ag.getColumns()[a6.cell].id==="actions"){if(a8.hasClass("go-to")){A(a7.groupId,a7.id)}else{if(a8.hasClass("show-cluster-input-port-summary")){t(a7.groupId,a7.id);e("#summary-loading-container").hide();e("#cluster-input-port-summary-dialog").modal("show");av.resizeCanvas()}}}});H.onRowCountChanged.subscribe(function(a7,a6){ag.updateRowCount();ag.render();if(e("#input-port-summary-table").is(":visible")){e("#display-items").text(i.formatInteger(a6.current))}});H.onRowsChanged.subscribe(function(a7,a6){ag.invalidateRows(a6.rows);ag.render()});e("#input-port-summary-table").data("gridInstance",ag).on("mouseenter","div.slick-cell",function(bb){var a8=e(this).find("div.has-bulletins");if(a8.length&&!a8.data("qtip")){var a6=e(this).find("span.row-id").text();var a7=H.getItemById(a6);var ba=i.getFormattedBulletins(a7.bulletins);var a9=i.formatUnorderedList(ba);if(i.isDefinedAndNotNull(a9)){a8.qtip(e.extend({},i.config.tooltipConfig,{content:a9,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-input-port-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Input Port Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-input-port-id").text("");e("#cluster-input-port-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-input-port-refresh-button").click(function(){t(e("#cluster-input-port-group-id").text(),e("#cluster-input-port-id").text())});var ac=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aR,a1];var aO={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var T=new v.Data.DataView({inlineFilters:false});T.setItems([]);x("cluster-input-port-summary-table",{columnId:"node",sortAsc:true},T);var av=new v.Grid("#cluster-input-port-summary-table",T,ac,aO);av.setSelectionModel(new v.RowSelectionModel());av.registerPlugin(new v.AutoTooltips());av.setSortColumn("node",true);av.onSort.subscribe(function(a7,a6){x("cluster-input-port-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},T)});T.onRowCountChanged.subscribe(function(a7,a6){av.updateRowCount();av.render()});T.onRowsChanged.subscribe(function(a7,a6){av.invalidateRows(a6.rows);av.render()});e("#cluster-input-port-summary-table").data("gridInstance",av);var ax=[aI,a0,aR,at];if(ap||aU){var aJ=function(bb,a7,ba,a9,a6){var a8="";if(aU){a8+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Output Port"></div>'}if(ap){a8+='<div class="pointer show-cluster-output-port-summary fa fa-cubes" title="View Output Port Details"></div>'}return a8};ax.push({id:"actions",name:"&nbsp;",formatter:aJ,resizable:false,sortable:false,width:75,maxWidth:75})}var an={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var D=new v.Data.DataView({inlineFilters:false});D.setItems([]);D.setFilterArgs({searchString:"",property:"name"});D.setFilter(l);x("output-port-summary-table",{columnId:"name",sortAsc:true},D);var af=new v.Grid("#output-port-summary-table",D,ax,an);af.setSelectionModel(new v.RowSelectionModel());af.registerPlugin(new v.AutoTooltips());af.setSortColumn("name",true);af.onSort.subscribe(function(a7,a6){x("output-port-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},D)});af.onClick.subscribe(function(a9,a6){var a8=e(a9.target);var a7=D.getItem(a6.row);if(af.getColumns()[a6.cell].id==="actions"){if(a8.hasClass("go-to")){A(a7.groupId,a7.id)}else{if(a8.hasClass("show-cluster-output-port-summary")){k(a7.groupId,a7.id);e("#summary-loading-container").hide();e("#cluster-output-port-summary-dialog").modal("show");a3.resizeCanvas()}}}});D.onRowCountChanged.subscribe(function(a7,a6){af.updateRowCount();af.render();if(e("#output-port-summary-table").is(":visible")){e("#display-items").text(i.formatInteger(a6.current))}});D.onRowsChanged.subscribe(function(a7,a6){af.invalidateRows(a6.rows);af.render()});e("#output-port-summary-table").data("gridInstance",af).on("mouseenter","div.slick-cell",function(bb){var a8=e(this).find("div.has-bulletins");if(a8.length&&!a8.data("qtip")){var a6=e(this).find("span.row-id").text();var a7=D.getItemById(a6);var ba=i.getFormattedBulletins(a7.bulletins);var a9=i.formatUnorderedList(ba);if(i.isDefinedAndNotNull(a9)){a8.qtip(e.extend({},i.config.tooltipConfig,{content:a9,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-output-port-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Output Port Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-output-port-id").text("");e("#cluster-output-port-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-output-port-refresh-button").click(function(){k(e("#cluster-output-port-group-id").text(),e("#cluster-output-port-id").text())});var S=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aR,at];var ak={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aG=new v.Data.DataView({inlineFilters:false});aG.setItems([]);x("cluster-output-port-summary-table",{columnId:"node",sortAsc:true},aG);var a3=new v.Grid("#cluster-output-port-summary-table",aG,S,ak);a3.setSelectionModel(new v.RowSelectionModel());a3.registerPlugin(new v.AutoTooltips());a3.setSortColumn("node",true);a3.onSort.subscribe(function(a7,a6){x("cluster-output-port-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},aG)});aG.onRowCountChanged.subscribe(function(a7,a6){a3.updateRowCount();a3.render()});aG.onRowsChanged.subscribe(function(a7,a6){a3.invalidateRows(a6.rows);a3.render()});e("#cluster-output-port-summary-table").data("gridInstance",a3);var W=function(be,bc,bb,a9,a6){var ba="";if(i.isDefinedAndNotNull(a6.activeThreadCount)&&a6.activeThreadCount>0){ba="("+i.escapeHtml(a6.activeThreadCount)+")"}var bd="invalid fa fa-warning";var a7="Invalid";if(bb==="Transmitting"){bd="transmitting fa fa-bullseye";a7=bb}else{bd="not-transmitting icon icon-transmit-false";a7="Not Transmitting"}var a8='<div layout="row"><div class="'+bd+'"></div>';return a8+'<div class="status-text">'+a7+'</div><div style="float: left; margin-left: 4px;">'+i.escapeHtml(ba)+"</div></div>"};var aa={id:"transmissionStatus",field:"transmissionStatus",name:"Transmitting",formatter:W,sortable:true,resizable:true};var aQ={id:"targetUri",field:"targetUri",name:"Target URI",sortable:true,resizable:true,formatter:i.genericValueFormatter};var al=[{id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:P,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"},a0,aQ,aa,Y,aF];if(ap||aU||i.SUPPORTS_SVG){var O=function(bb,a7,ba,a9,a6){var a8="";if(aU){a8+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Process Group"></div>'}if(i.SUPPORTS_SVG){a8+='<div class="pointer show-remote-process-group-status-history fa fa-area-chart" title="View Status History"></div>'}if(ap){a8+='<div class="pointer show-cluster-remote-process-group-summary fa fa-cubes" title="View Remote Process Group Details"></div>'}return a8};al.push({id:"actions",name:"&nbsp;",formatter:O,resizable:false,sortable:false,width:75,maxWidth:75})}var aM={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aV=new v.Data.DataView({inlineFilters:false});aV.setItems([]);aV.setFilterArgs({searchString:"",property:"name"});aV.setFilter(l);x("remote-process-group-summary-table",{columnId:"name",sortAsc:true},aV);var U=new v.Grid("#remote-process-group-summary-table",aV,al,aM);U.setSelectionModel(new v.RowSelectionModel());U.registerPlugin(new v.AutoTooltips());U.setSortColumn("name",true);U.onSort.subscribe(function(a7,a6){x("remote-process-group-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},aV)});U.onClick.subscribe(function(a9,a6){var a8=e(a9.target);var a7=aV.getItem(a6.row);if(U.getColumns()[a6.cell].id==="actions"){if(a8.hasClass("go-to")){A(a7.groupId,a7.id)}else{if(a8.hasClass("show-remote-process-group-status-history")){c.showRemoteProcessGroupChart(a7.groupId,a7.id)}else{if(a8.hasClass("show-cluster-remote-process-group-summary")){f(a7.groupId,a7.id);e("#summary-loading-container").hide();e("#cluster-remote-process-group-summary-dialog").modal("show");ao.resizeCanvas()}}}}});aV.onRowCountChanged.subscribe(function(a7,a6){U.updateRowCount();U.render();if(e("#remote-process-group-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(a6.current))}});aV.onRowsChanged.subscribe(function(a7,a6){U.invalidateRows(a6.rows);U.render()});e("#remote-process-group-summary-table").data("gridInstance",U).on("mouseenter","div.slick-cell",function(bb){var a8=e(this).find("div.has-bulletins");if(a8.length&&!a8.data("qtip")){var a6=e(this).find("span.row-id").text();var a7=aV.getItemById(a6);var ba=i.getFormattedBulletins(a7.bulletins);var a9=i.formatUnorderedList(ba);if(i.isDefinedAndNotNull(a9)){a8.qtip(e.extend({},i.config.tooltipConfig,{content:a9,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-remote-process-group-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Remote Process Group Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-remote-process-group-id").text("");e("#cluster-remote-process-group-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-remote-process-group-refresh-button").click(function(){f(e("#cluster-remote-process-group-group-id").text(),e("#cluster-remote-process-group-id").text())});var aL=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aQ,aa,Y,aF];var I={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:false,enableColumnReorder:false,autoEdit:false,rowHeight:24};var L=new v.Data.DataView({inlineFilters:false});L.setItems([]);x("cluster-remote-process-group-summary-table",{columnId:"node",sortAsc:true},L);var ao=new v.Grid("#cluster-remote-process-group-summary-table",L,aL,I);ao.setSelectionModel(new v.RowSelectionModel());ao.registerPlugin(new v.AutoTooltips());ao.setSortColumn("node",true);ao.onSort.subscribe(function(a7,a6){x("cluster-remote-process-group-summary-table",{columnId:a6.sortCol.field,sortAsc:a6.sortAsc},L)});L.onRowCountChanged.subscribe(function(a7,a6){ao.updateRowCount();ao.render()});L.onRowsChanged.subscribe(function(a7,a6){ao.invalidateRows(a6.rows);ao.render()});e("#cluster-remote-process-group-summary-table").data("gridInstance",ao);e("#system-diagnostics-link").click(function(){r().done(function(){e("#summary-loading-container").hide();e("#system-diagnostics-dialog").modal("show")})});e("#system-diagnostics-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"JVM",tabContentId:"jvm-tab-content"},{name:"System",tabContentId:"system-tab-content"},{name:"Version",tabContentId:"version-tab-content"}]});e("#system-diagnostics-dialog").modal({scrollableContentStyle:"scrollable",headerText:"System Diagnostics",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()},open:function(){i.toggleScrollable(e("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}});e("#system-diagnostics-refresh-button").click(function(){r()});e("#total-items").text("0")};var a={};var x=function(E,C,F){if(i.isUndefined(a[E])){a[E]={}}var D=function(ad,ac){if(C.columnId==="moreDetails"){var Y=0;if(!i.isEmpty(ad.bulletins)){Y=ad.bulletins.length}var J=0;if(!i.isEmpty(ac.bulletins)){J=ac.bulletins.length}return Y-J}else{if(C.columnId==="runStatus"||C.columnId==="transmissionStatus"){var T=i.isDefinedAndNotNull(ad[C.columnId])?ad[C.columnId]:"";var R=i.isDefinedAndNotNull(ac[C.columnId])?ac[C.columnId]:"";if(T===R){return ad.activeThreadCount-ac.activeThreadCount}else{return T===R?0:T>R?1:-1}}else{if(C.columnId==="queued"){var af=a[E].count%4;if(af<2){e("#"+E+" span.queued-title").addClass("sorted");var ag=i.parseCount(ad.queuedCount);var H=i.parseCount(ac.queuedCount);return ag-H}else{e("#"+E+" span.queued-size-title").addClass("sorted");var G=i.parseSize(ad.queuedSize);var N=i.parseSize(ac.queuedSize);return G-N}}else{if(C.columnId==="backpressure"){var af=a[E].count%4;if(af<2){e("#"+E+" span.backpressure-object-title").addClass("sorted");var M=i.isDefinedAndNotNull(ad.percentUseCount)?ad.percentUseCount:-1;var O=i.isDefinedAndNotNull(ac.percentUseCount)?ac.percentUseCount:-1;return M-O}else{e("#"+E+" span.backpressure-data-size-title").addClass("sorted");var X=i.isDefinedAndNotNull(ad.percentUseBytes)?ad.percentUseBytes:-1;var ae=i.isDefinedAndNotNull(ac.percentUseBytes)?ac.percentUseBytes:-1;return X-ae}}else{if(C.columnId==="sent"||C.columnId==="received"||C.columnId==="input"||C.columnId==="output"||C.columnId==="transferred"){var W=ad[C.columnId].split(/\(([^)]+)\)/);var aa=ac[C.columnId].split(/\(([^)]+)\)/);var af=a[E].count%4;if(af<2){e("#"+E+" span."+C.columnId+"-title").addClass("sorted");var L=i.parseCount(W[0]);var P=i.parseCount(aa[0]);return L-P}else{e("#"+E+" span."+C.columnId+"-size-title").addClass("sorted");var S=i.parseSize(W[1]);var K=i.parseSize(aa[1]);return S-K}}else{if(C.columnId==="io"){var af=a[E].count%4;if(af<2){e("#"+E+" span.read-title").addClass("sorted");var ai=i.parseSize(ad.read);var ab=i.parseSize(ac.read);return ai-ab}else{e("#"+E+" span.written-title").addClass("sorted");var Q=i.parseSize(ad.written);var ah=i.parseSize(ac.written);return Q-ah}}else{if(C.columnId==="tasks"){var af=a[E].count%4;if(af<2){e("#"+E+" span.tasks-title").addClass("sorted");var V=i.parseCount(ad.tasks);var Z=i.parseCount(ac.tasks);return V-Z}else{e("#"+E+" span.time-title").addClass("sorted");var I=i.parseDuration(ad.tasksDuration);var U=i.parseDuration(ac.tasksDuration);return I-U}}else{var T=i.isDefinedAndNotNull(ad[C.columnId])?ad[C.columnId]:"";var R=i.isDefinedAndNotNull(ac[C.columnId])?ac[C.columnId]:"";return T===R?0:T>R?1:-1}}}}}}}};e("#"+E+" span.queued-title").removeClass("sorted");e("#"+E+" span.queued-size-title").removeClass("sorted");e("#"+E+" span.backpressure-object-title").removeClass("sorted");e("#"+E+" span.backpressure-data-size-title").removeClass("sorted");e("#"+E+" span.input-title").removeClass("sorted");e("#"+E+" span.input-size-title").removeClass("sorted");e("#"+E+" span.output-title").removeClass("sorted");e("#"+E+" span.output-size-title").removeClass("sorted");e("#"+E+" span.read-title").removeClass("sorted");e("#"+E+" span.written-title").removeClass("sorted");e("#"+E+" span.time-title").removeClass("sorted");e("#"+E+" span.tasks-title").removeClass("sorted");e("#"+E+" span.sent-title").removeClass("sorted");e("#"+E+" span.sent-size-title").removeClass("sorted");e("#"+E+" span.received-title").removeClass("sorted");e("#"+E+" span.received-size-title").removeClass("sorted");e("#"+E+" span.transferred-title").removeClass("sorted");e("#"+E+" span.transferred-size-title").removeClass("sorted");if(a[E].prevColumn!==C.columnId){a[E].count=0}else{a[E].count++}F.sort(D,C.sortAsc);a[E].prevColumn=C.columnId};var l=function(D,C){if(C.searchString===""){return true}try{var F=new RegExp(C.searchString,"i")}catch(E){return false}return D[C.property].search(F)>=0};var r=function(){var D=y.urls.systemDiagnostics;var C={};if(!i.isNull(g)){C.clusterNodeId=g}if(!e.isEmptyObject(C)){D+="?"+e.param(C)}return e.ajax({type:"GET",url:D,dataType:"json"}).done(function(I){var N=I.systemDiagnostics;var G=N.aggregateSnapshot;e("#max-heap").text(G.maxHeap);e("#total-heap").text(G.totalHeap);e("#used-heap").text(G.usedHeap);e("#free-heap").text(G.freeHeap);if(i.isDefinedAndNotNull(G.heapUtilization)){e("#utilization-heap").text("("+G.heapUtilization+")")}else{e("#utilization-heap").text("")}e("#max-non-heap").text(G.maxNonHeap);e("#total-non-heap").text(G.totalNonHeap);e("#used-non-heap").text(G.usedNonHeap);e("#free-non-heap").text(G.freeNonHeap);if(i.isDefinedAndNotNull(G.nonHeapUtilization)){e("#utilization-non-heap").text("("+G.nonHeapUtilization+")")}else{e("#utilization-non-heap").text("")}var M=e("#garbage-collection-table tbody").empty();if(i.isDefinedAndNotNull(G.garbageCollection)){var H=G.garbageCollection.sort(function(S,R){return S.name===R.name?0:S.name>R.name?1:-1});e.each(H,function(S,R){s(M,R)})}e("#uptime").text(G.uptime);e("#available-processors").text(G.availableProcessors);if(i.isDefinedAndNotNull(G.processorLoadAverage)){e("#processor-load-average").text(i.formatFloat(G.processorLoadAverage))}else{e("#processor-load-average").html(i.formatValue(G.processorLoadAverage))}var O=e("#flow-file-repository-storage-usage-container").empty();d(O,G.flowFileRepositoryStorageUsage);var K=e("#content-repository-storage-usage-container").empty();if(i.isDefinedAndNotNull(G.contentRepositoryStorageUsage)){var L=G.contentRepositoryStorageUsage.sort(function(S,R){return S.identifier===R.identifier?0:S.identifier>R.identifier?1:-1});e.each(L,function(R,S){d(K,S)})}var Q=e("#provenance-repository-storage-usage-container").empty();if(i.isDefinedAndNotNull(G.provenanceRepositoryStorageUsage)){var F=G.provenanceRepositoryStorageUsage.sort(function(S,R){return S.identifier===R.identifier?0:S.identifier>R.identifier?1:-1});e.each(F,function(S,R){d(Q,R)})}var J={"#version-nifi":G.versionInfo.niFiVersion,"#version-build-tag":G.versionInfo.buildTag,"#version-build-timestamp":G.versionInfo.buildTimestamp,"#version-build-branch":G.versionInfo.buildBranch,"#version-build-revision":G.versionInfo.buildRevision,"#version-java-version":G.versionInfo.javaVersion,"#version-java-vendor":G.versionInfo.javaVendor,"#version-os-name":G.versionInfo.osName,"#version-os-version":G.versionInfo.osVersion,"#version-os-arch":G.versionInfo.osArchitecture};for(var E in J){var P=J[E];if(P){e(E).text(P)}else{e(E).text("(not available)").addClass("unset")}}e("#system-diagnostics-last-refreshed").text(G.statsLastRefreshed)}).fail(h.handleAjaxError)};var s=function(D,C){var F=e("<tr></tr>").appendTo(D);e('<td class="setting-name"></td>').text(C.name+":").appendTo(F);var E=e("<tr></tr>").appendTo(D);e("<td></td>").append(e("<b></b>").text(C.collectionCount+" times ("+C.collectionTime+")")).appendTo(E);e("<tr></tr>").text(" ").appendTo(D)};var d=function(D,G){var F=parseInt(G.totalSpaceBytes,10);var E=parseInt(G.usedSpaceBytes,10);var I=e('<div class="storage-usage"></div>').appendTo(D);var H=e('<div class="storage-identifier setting-name"></div>');H.text("Usage:");if(i.isDefinedAndNotNull(G.identifier)){H.text("Usage for "+G.identifier+":")}H.appendTo(I);(B.injector.get("$compile")(e('<md-progress-linear class="md-hue-2" md-mode="determinate" value="'+(E/F)*100+'" aria-label="FlowFile Repository Storage Usage"></md-progress-linear>'))(B.rootScope)).appendTo(I);var C=e('<div class="storage-usage-details"></div>').text(" ("+G.usedSpace+" of "+G.totalSpace+")").prepend(e("<b></b>").text(Math.round((E/F)*100)+"%"));e('<div class="storage-usage-header"></div>').append(C).append('<div class="clear"></div>').appendTo(I)};var w=function(){return e("#summary-filter").val()};var u=function(J,I,D,H,G,F,E,C){e.each(E.processorStatusSnapshots,function(L,K){var M=K.processorStatusSnapshot;M.parentProcessGroupName=E.name;M.processGroupNamePath=C.reduce(function(N,O){return N+"/"+O.name},"");J.push(M)});e.each(E.connectionStatusSnapshots,function(K,L){I.push(L.connectionStatusSnapshot)});e.each(E.inputPortStatusSnapshots,function(K,L){H.push(L.portStatusSnapshot)});e.each(E.outputPortStatusSnapshots,function(K,L){G.push(L.portStatusSnapshot)});e.each(E.remoteProcessGroupStatusSnapshots,function(K,L){F.push(L.remoteProcessGroupStatusSnapshot)});D.push(E);e.each(E.processGroupStatusSnapshots,function(K,L){var M=L.processGroupStatusSnapshot;u(J,I,D,H,G,F,M,j(C,M))})};var j=function(C,E){var D=C.slice();D.push(E);return D};var z=function(){var C;if(e("#processor-summary-table").is(":visible")){C=e("#processor-summary-table").data("gridInstance")}else{if(e("#connection-summary-table").is(":visible")){C=e("#connection-summary-table").data("gridInstance")}else{if(e("#input-port-summary-table").is(":visible")){C=e("#input-port-summary-table").data("gridInstance")}else{if(e("#output-port-summary-table").is(":visible")){C=e("#output-port-summary-table").data("gridInstance")}else{if(e("#process-group-summary-table").is(":visible")){C=e("#process-group-summary-table").data("gridInstance")}else{if(e("#remote-process-group-summary-table").is(":visible")){C=e("#remote-process-group-summary-table").data("gridInstance")}}}}}}if(i.isDefinedAndNotNull(C)){var D=C.getData();D.setFilterArgs({searchString:w(),property:e("#summary-filter-type").combo("getSelectedOption").value});D.refresh()}};var m=function(C,D){e.ajax({type:"GET",url:y.urls.api+"/flow/processors/"+encodeURIComponent(D)+"/status",data:{nodewise:true},dataType:"json"}).done(function(E){if(i.isDefinedAndNotNull(E.processorStatus)){var I=E.processorStatus;var G=e("#cluster-processor-summary-table").data("gridInstance");var H=G.getData();var F=[];e.each(I.nodeSnapshots,function(L,J){var K=J.statusSnapshot;F.push({id:J.nodeId,node:J.address+":"+J.apiPort,runStatus:K.runStatus,activeThreadCount:K.activeThreadCount,terminatedThreadCount:K.terminatedThreadCount,input:K.input,read:K.read,written:K.written,output:K.output,tasks:K.tasks,tasksDuration:K.tasksDuration})});H.setItems(F);H.reSort();G.invalidate();e("#cluster-processor-name").text(I.name).ellipsis();e("#cluster-processor-type").text(I.aggregateSnapshot.type).ellipsis();e("#cluster-processor-id").text(I.id);e("#cluster-processor-group-id").text(I.groupId);e("#cluster-processor-summary-last-refreshed").text(I.statsLastRefreshed)}}).fail(h.handleAjaxError)};var b=function(C,D){e.ajax({type:"GET",url:y.urls.api+"/flow/connections/"+encodeURIComponent(D)+"/status",data:{nodewise:true},dataType:"json"}).done(function(E){if(i.isDefinedAndNotNull(E.connectionStatus)){var F=E.connectionStatus;var H=e("#cluster-connection-summary-table").data("gridInstance");var I=H.getData();var G=[];e.each(F.nodeSnapshots,function(L,J){var K=J.statusSnapshot;G.push({id:J.nodeId,node:J.address+":"+J.apiPort,input:K.input,queued:K.queued,queuedCount:K.queuedCount,queuedSize:K.queuedSize,percentUseCount:K.percentUseCount,percentUseBytes:K.percentUseBytes,output:K.output})});I.setItems(G);I.reSort();H.invalidate();e("#cluster-connection-name").text(F.name).ellipsis();e("#cluster-connection-type").text("Connection").ellipsis();e("#cluster-connection-id").text(F.id);e("#cluster-connection-group-id").text(F.groupId);e("#cluster-connection-summary-last-refreshed").text(F.statsLastRefreshed)}}).fail(h.handleAjaxError)};var n=function(C){e.ajax({type:"GET",url:y.urls.api+"/flow/process-groups/"+encodeURIComponent(C)+"/status",data:{nodewise:true,recursive:false},dataType:"json"}).done(function(F){if(i.isDefinedAndNotNull(F.processGroupStatus)){var H=F.processGroupStatus;var D=e("#cluster-process-group-summary-table").data("gridInstance");var G=D.getData();var E=[];e.each(H.nodeSnapshots,function(K,I){var J=I.statusSnapshot;E.push({id:I.nodeId,node:I.address+":"+I.apiPort,activeThreadCount:J.activeThreadCount,transferred:J.transferred,input:J.input,queued:J.queued,queuedCount:J.queuedCount,queuedSize:J.queuedSize,output:J.output,read:J.read,written:J.written,sent:J.sent,received:J.received})});G.setItems(E);G.reSort();D.invalidate();e("#cluster-process-group-name").text(H.name).ellipsis();e("#cluster-process-group-type").text("Process Group").ellipsis();e("#cluster-process-group-id").text(H.id);e("#cluster-process-group-summary-last-refreshed").text(H.statsLastRefreshed)}}).fail(h.handleAjaxError)};var t=function(C,D){e.ajax({type:"GET",url:y.urls.api+"/flow/input-ports/"+encodeURIComponent(D)+"/status",data:{nodewise:true},dataType:"json"}).done(function(F){if(i.isDefinedAndNotNull(F.portStatus)){var G=F.portStatus;var E=e("#cluster-input-port-summary-table").data("gridInstance");var H=E.getData();var I=[];e.each(G.nodeSnapshots,function(L,J){var K=J.statusSnapshot;I.push({id:J.nodeId,node:J.address+":"+J.apiPort,runStatus:K.runStatus,activeThreadCount:K.activeThreadCount,output:K.output})});H.setItems(I);H.reSort();E.invalidate();e("#cluster-input-port-name").text(G.name).ellipsis();e("#cluster-input-port-type").text("Input Port").ellipsis();e("#cluster-input-port-id").text(G.id);e("#cluster-input-port-group-id").text(G.groupId);e("#cluster-input-port-summary-last-refreshed").text(G.statsLastRefreshed)}}).fail(h.handleAjaxError)};var k=function(C,D){e.ajax({type:"GET",url:y.urls.api+"/flow/output-ports/"+encodeURIComponent(D)+"/status",data:{nodewise:true},dataType:"json"}).done(function(F){if(i.isDefinedAndNotNull(F.portStatus)){var E=F.portStatus;var G=e("#cluster-output-port-summary-table").data("gridInstance");var I=G.getData();var H=[];e.each(E.nodeSnapshots,function(L,J){var K=J.statusSnapshot;H.push({id:J.nodeId,node:J.address+":"+J.apiPort,runStatus:K.runStatus,activeThreadCount:K.activeThreadCount,input:K.input})});I.setItems(H);I.reSort();G.invalidate();e("#cluster-output-port-name").text(E.name).ellipsis();e("#cluster-output-port-type").text("Output Port").ellipsis();e("#cluster-output-port-id").text(E.id);e("#cluster-output-port-group-id").text(E.groupId);e("#cluster-output-port-summary-last-refreshed").text(E.statsLastRefreshed)}}).fail(h.handleAjaxError)};var f=function(D,C){e.ajax({type:"GET",url:y.urls.api+"/flow/remote-process-groups/"+encodeURIComponent(C)+"/status",data:{nodewise:true},dataType:"json"}).done(function(F){if(i.isDefinedAndNotNull(F.remoteProcessGroupStatus)){var I=F.remoteProcessGroupStatus;var G=e("#cluster-remote-process-group-summary-table").data("gridInstance");var H=G.getData();var E=[];e.each(I.nodeSnapshots,function(L,J){var K=J.statusSnapshot;E.push({id:J.nodeId,node:J.address+":"+J.apiPort,targetUri:K.targetUri,transmissionStatus:K.transmissionStatus,sent:K.sent,received:K.received,activeThreadCount:K.activeThreadCount})});H.setItems(E);H.reSort();G.invalidate();e("#cluster-remote-process-group-name").text(I.name).ellipsis();e("#cluster-remote-process-group-type").text("Remote Process Group").ellipsis();e("#cluster-remote-process-group-id").text(I.id);e("#cluster-remote-process-group-group-id").text(I.groupId);e("#cluster-remote-process-group-summary-last-refreshed").text(I.statsLastRefreshed)}}).fail(h.handleAjaxError)};var g=null;return{init:function(C){return e.Deferred(function(D){var E=e.ajax({type:"GET",url:y.urls.flowConfig,dataType:"json"}).done(function(G){var F=G.flowConfiguration;c.init(F.timeOffset);p.init(false);o.init();q(C);D.resolve()}).fail(function(){D.reject()})}).promise()},setClusterNodeId:function(C){g=C},resetTableSize:function(){var H=e("#processor-summary-table");if(H.is(":visible")){var L=H.data("gridInstance");if(i.isDefinedAndNotNull(L)){L.resizeCanvas()}}var K=e("#connection-summary-table");if(K.is(":visible")){var G=K.data("gridInstance");if(i.isDefinedAndNotNull(G)){G.resizeCanvas()}}var C=e("#process-group-summary-table");if(C.is(":visible")){var I=C.data("gridInstance");if(i.isDefinedAndNotNull(I)){I.resizeCanvas()}}var N=e("#input-port-summary-table");if(N.is(":visible")){var M=N.data("gridInstance");if(i.isDefinedAndNotNull(M)){M.resizeCanvas()}}var E=e("#output-port-summary-table");if(E.is(":visible")){var J=E.data("gridInstance");if(i.isDefinedAndNotNull(J)){J.resizeCanvas()}}var F=e("#remote-process-group-summary-table");if(F.is(":visible")){var D=F.data("gridInstance");if(i.isDefinedAndNotNull(D)){D.resizeCanvas()}}},loadSummaryTable:function(){var C=y.urls.status;var D={};if(!i.isNull(g)){D.clusterNodeId=g}if(!e.isEmptyObject(D)){C+="?"+e.param(D)}return e.ajax({type:"GET",url:C,data:{recursive:true},dataType:"json"}).done(function(E){var T=E.processGroupStatus;var J=T.aggregateSnapshot;if(i.isDefinedAndNotNull(J)){var O=e("#processor-summary-table");i.cleanUpTooltips(O,"div.has-bulletins");var M=O.data("gridInstance");var K=M.getData();var H=e("#connection-summary-table").data("gridInstance");var G=H.getData();var F=e("#process-group-summary-table");i.cleanUpTooltips(F,"div.has-bulletins");var P=F.data("gridInstance");var N=P.getData();var ab=e("#input-port-summary-table");i.cleanUpTooltips(ab,"div.has-bulletins");var Z=ab.data("gridInstance");var Y=Z.getData();var ac=e("#output-port-summary-table");i.cleanUpTooltips(ac,"div.has-bulletins");var R=ac.data("gridInstance");var Q=R.getData();var S=e("#remote-process-group-summary-table");i.cleanUpTooltips(S,"div.has-bulletins");var W=S.data("gridInstance");var V=W.getData();var aa=[];var X=[];var L=[];var U=[];var ad=[];var I=[];u(aa,X,L,U,ad,I,J,[J]);K.setItems(aa);K.reSort();M.invalidate();G.setItems(X);G.reSort();H.invalidate();N.setItems(L);N.reSort();P.invalidate();Y.setItems(U);Y.reSort();Z.invalidate();Q.setItems(ad);Q.reSort();R.invalidate();V.setItems(I);V.reSort();W.invalidate();e("#summary-last-refreshed").text(T.statsLastRefreshed);if(e("#processor-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(aa.length))}else{if(e("#connection-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(X.length))}else{if(e("#input-port-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(U.length))}else{if(e("#output-port-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(ad.length))}else{if(e("#process-group-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(L.length))}else{e("#total-items").text(i.formatInteger(I.length))}}}}}}else{e("#total-items").text("0")}}).fail(h.handleAjaxError)}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.Dialog","nf.SummaryTable"],function(d,e,c,f){return(nf.ClusterSearch=b(d,e,c,f))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ClusterSearch=b(require("jquery"),require("nf.Common"),require("nf.Dialog"),require("nf.SummaryTable")))}else{nf.ClusterSearch=b(a.$,a.nf.Common,a.nf.Dialog,a.nf.SummaryTable)}}}(this,function(c,d,b,e){var a={search:"Search nodes",urls:{clusterSearch:"../nifi-api/flow/cluster/search-results"}};return{init:function(){c("#view-single-node-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Select node",buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){var f=c("#cluster-search-field").val();c.ajax({type:"GET",data:{q:f},dataType:"json",url:a.urls.clusterSearch}).done(function(g){var i=g.nodeResults;var h=function(k){e.setClusterNodeId(k.id);e.loadSummaryTable();c("#summary-header-text").text(k.address+" Summary")};if(!c.isArray(i)||i.length===0){b.showOkDialog({headerText:"Cluster Search",dialogContent:"No nodes match '"+d.escapeHtml(f)+"'."})}else{if(i.length>1){var j=false;c.each(i,function(l,k){if(k.address===f){h(k);j=true;return false}});if(j){c("#view-single-node-dialog").modal("hide")}else{b.showOkDialog({headerText:"Cluster Search",dialogContent:"More than one node matches '"+d.escapeHtml(f)+"'."})}}else{if(i.length===1){h(i[0]);c("#view-single-node-dialog").modal("hide")}}}})}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){c("#cluster-search-field").val(a.search).addClass("search-nodes").clusterSearchAutocomplete("reset")}}});c.widget("nf.clusterSearchAutocomplete",c.ui.autocomplete,{reset:function(){this.term=null},_create:function(){this._super();this.widget().menu("option","items","> :not(.search-no-matches)")},_normalize:function(g){var f=[];f.push(g);return f},_renderMenu:function(h,f){var i=f[0];var g=this;c.each(i.nodeResults,function(j,k){g._renderItem(h,{label:k.address,value:k.address})});if(h.children().length===0){h.append('<li class="unset search-no-matches">No nodes matched the search terms</li>')}},_resizeMenu:function(){var f=this.menu.element;f.width(c("#cluster-search-field").outerWidth()-2)},_renderItem:function(g,f){var h=c("<a></a>").text(f.label);return c("<li></li>").data("ui-autocomplete-item",f).append(h).appendTo(g)}});c("#cluster-search-field").clusterSearchAutocomplete({minLength:0,appendTo:"#search-cluster-results",position:{my:"left top",at:"left bottom",offset:"0 1"},source:function(g,f){c.ajax({type:"GET",data:{q:g.term},dataType:"json",url:a.urls.clusterSearch}).done(function(h){f(h)})}}).focus(function(){if(c(this).val()===a.search){c(this).val("").removeClass("search-nodes")}}).val(a.search).addClass("search-nodes");c("#view-single-node-link").click(function(){c("#view-single-node-dialog").modal("show");c("#cluster-search-field").focus()});c("#view-cluster-link").click(function(){e.setClusterNodeId(null);e.loadSummaryTable();c("#summary-header-text").text("NiFi Summary")});c("#view-options-container").show()}}}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.ng.ServiceProvider=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.ServiceProvider=b())}else{nf.ng.ServiceProvider=b()}}}(this,function(){return function(){function a(){}a.prototype={constructor:a,register:function(c,b){this[c]=b},remove:function(b){delete this[b]}};return new a()}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["nf.ng.Bridge","nf.Common","nf.CanvasUtils","nf.ClusterSummary","nf.Actions"],function(e,f,g,c,d){return(nf.ng.AppCtrl=b(e,f,g,c,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.AppCtrl=b(require("nf.ng.Bridge"),require("nf.CanvasUtils"),require("nf.Common"),require("nf.ClusterSummary"),require("nf.Actions")))}else{nf.ng.AppCtrl=b(a.nf.ng.Bridge,a.nf.CanvasUtils,a.nf.Common,a.nf.ClusterSummary,a.nf.Actions)}}}(this,function(c,d,e,a,b){return function(g,i){function f(j){this.nf={Common:e,ClusterSummary:a,Actions:b,CanvasUtils:d,};this.serviceProvider=j}f.prototype={constructor:f};var h=new f(i);g.appCtrl=h;c.rootScope=g}}));
(function(a,b){if(typeof define==="function"&&define.amd){define([],function(){return(nf.ng.AppConfig=b())})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.AppConfig=b())}else{nf.ng.AppConfig=b()}}}(this,function(){return function(a,b){b.debugInfoEnabled(false);a.definePalette("basePalette",{"50":"728E9B","100":"728E9B","200":"004849","300":"775351","400":"728E9B","500":"728E9B","600":"728E9B","700":"728E9B","800":"728E9B","900":"rgba(249,250,251,0.97)",A100:"728E9B",A200:"728E9B",A400:"728E9B",A700:"728E9B",contrastDefaultColor:"light",contrastDarkColors:["A100"],contrastLightColors:undefined});a.definePalette("tintPalette",{"50":"728E9B","100":"728E9B","200":"CCDADB","300":"728E9B","400":"AABBC3","500":"728E9B","600":"C7D2D7","700":"728E9B","800":"E3E8EB","900":"728E9B",A100:"728E9B",A200:"728E9B",A400:"728E9B",A700:"728E9B",contrastDefaultColor:"light",contrastDarkColors:["A100"],contrastLightColors:undefined});a.definePalette("warnPalette",{"50":"BA554A","100":"BA554A","200":"BA554A","300":"BA554A","400":"BA554A","500":"BA554A","600":"BA554A","700":"BA554A","800":"BA554A","900":"BA554A",A100:"BA554A",A200:"BA554A",A400:"BA554A",A700:"BA554A",contrastDefaultColor:"light",contrastDarkColors:["A100"],contrastLightColors:undefined});a.theme("default").primaryPalette("basePalette",{"default":"500","hue-1":"200","hue-2":"300","hue-3":"900"}).accentPalette("tintPalette",{"default":"200","hue-1":"400","hue-2":"600","hue-3":"800"}).warnPalette("warnPalette",{"default":"500"})}}));
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","angular","nf.Common","nf.ClusterSummary","nf.ClusterSearch","nf.ng.AppConfig","nf.ng.AppCtrl","nf.ng.ServiceProvider","nf.ng.Bridge","nf.ErrorHandler","nf.Storage","nf.SummaryTable"],function(f,l,e,k,n,o,j,d,c,h,i,g,m){return(nf.Summary=b(f,l,e,k,n,o,j,d,h,i,g,m))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Summary=b(require("jquery"),require("angular"),require("nf.Common"),require("nf.ClusterSummary"),require("nf.ClusterSearch"),require("nf.ng.AppConfig"),require("nf.ng.AppCtrl"),require("nf.ng.ServiceProvider"),require("nf.ng.Bridge"),require("nf.ErrorHandler"),require("nf.Storage"),require("nf.SummaryTable")))}else{nf.Summary=b(a.$,a.angular,a.nf.Common,a.nf.ClusterSummary,a.nf.ClusterSearch,a.nf.ng.AppConfig,a.nf.ng.AppCtrl,a.nf.ng.ServiceProvider,a.nf.ng.Bridge,a.nf.ErrorHandler,a.nf.Storage,a.nf.SummaryTable)}}}(this,function(e,m,d,k,o,p,j,c,g,i,f,n){e(document).ready(function(){var q=m.module("ngSummaryApp",["ngResource","ngRoute","ngMaterial","ngMessages"]);p.$inject=["$mdThemingProvider","$compileProvider"];j.$inject=["$scope","serviceProvider"];c.$inject=[];q.config(p);q.controller("ngSummaryAppCtrl",j);q.service("serviceProvider",c);g.injector=m.bootstrap(e("body"),["ngSummaryApp"],{strictDi:true});k.loadClusterSummary().done(function(){h.init()})});var b={urls:{banners:"../nifi-api/flow/banners",about:"../nifi-api/flow/about",clusterSummary:"../nifi-api/flow/cluster/summary"}};var l=function(){return e.Deferred(function(q){e.ajax({type:"GET",url:b.urls.clusterSummary}).done(function(r){n.init(r.clusterSummary.connectedToCluster).done(function(){if(r.clusterSummary.connectedToCluster){o.init()}q.resolve()}).fail(function(){q.reject()})}).fail(i.handleAjaxError)}).promise()};var a=function(){e("#refresh-button").click(function(){k.loadClusterSummary().done(function(){n.loadSummaryTable()})});return e.Deferred(function(q){if(top===window){e.ajax({type:"GET",url:b.urls.banners,dataType:"json"}).done(function(v){if(d.isDefinedAndNotNull(v.banners)){if(d.isDefinedAndNotNull(v.banners.headerText)&&v.banners.headerText!==""){var s=e("#banner-header").text(v.banners.headerText).show();var u=function(w){var x=e("#"+w);x.css("top",(parseInt(s.css("height"),10)+parseInt(x.css("top"),10))+"px")};u("summary")}if(d.isDefinedAndNotNull(v.banners.footerText)&&v.banners.footerText!==""){var r=e("#banner-footer").text(v.banners.footerText).show();var t=function(w){var x=e("#"+w);x.css("bottom",parseInt(r.css("height"),10)+"px")};t("summary")}}q.resolve()}).fail(function(t,r,s){i.handleAjaxError(t,r,s);q.reject()})}else{q.resolve()}}).promise()};var h={init:function(){f.init();l().done(function(){n.loadSummaryTable().done(function(){a().done(function(){var q=function(){if(top===window){e("body").css({height:e(window).height()+"px",width:e(window).width()+"px"});e("#summary").css("margin",40);e("div.summary-table").css("bottom",127);e("#flow-summary-refresh-container").css({position:"absolute",bottom:"0px",margin:"40px"})}n.resetTableSize()};e.ajax({type:"GET",url:b.urls.about,dataType:"json"}).done(function(s){var r=s.about;var t=r.title+" Summary";document.title=t;e("#status-header-text").text(t);q()}).fail(i.handleAjaxError);e(window).on("resize",function(y){q();var r=e(".dialog");for(var w=0,x=r.length;w<x;w++){if(e(r[w]).is(":visible")){setTimeout(function(A){A.modal("resize")},50,e(r[w]))}}var z=e('*[class*="slickgrid_"]');for(var v=0,x=z.length;v<x;v++){if(e(z[v]).is(":visible")){setTimeout(function(A){A.data("gridInstance").resizeCanvas()},50,e(z[v]))}}var t=e(".tab-container");var s=[];for(var u=0,x=t.length;u<x;u++){if(e(t[u]).is(":visible")){s.push(e("#"+e(t[u]).attr("id")+"-content"))}}e.each(s,function(A,B){d.toggleScrollable(B.get(0))})})})})})}};return h}));
