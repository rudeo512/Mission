<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>InferAvroSchema</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">InferAvroSchema</h1><h2>Description: </h2><p>Examines the contents of the incoming FlowFile to infer an Avro schema. The processor will use the Kite SDK to make an attempt to automatically generate an Avro schema from the incoming content. When inferring the schema from JSON data the key names will be used in the resulting Avro schema definition. When inferring from CSV data a "header definition" must be present either as the first line of the incoming data or the "header definition" must be explicitly set in the property "CSV Header Definition". A "header definition" is simply a single comma separated line defining the names of each column. The "header definition" is required in order to determine the names that should be given to each field in the resulting Avro definition. When inferring data types the higher order data type is always used if there is ambiguity. For example when examining numerical values the type may be set to "long" instead of "integer" since a long can safely hold the value of any "integer". Only CSV and JSON content is currently supported for automatically inferring an Avro schema. The type of content present in the incoming FlowFile is set by using the property "Input Content Type". The property can either be explicitly set to CSV, JSON, or "use mime.type value" which will examine the value of the mime.type attribute on the incoming FlowFile to determine the type of content present.</p><h3>Tags: </h3><p>kite, avro, infer, schema, csv, json</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values, and whether a property supports the <a href="../../../../../html/expression-language-guide.html">NiFi Expression Language</a>.</p><table id="properties"><tr><th>Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name"><strong>Schema Output Destination</strong></td><td id="default-value">flowfile-content</td><td id="allowable-values"><ul><li>flowfile-attribute</li><li>flowfile-content</li></ul></td><td id="description">Control if Avro schema is written as a new flowfile attribute 'inferred.avro.schema' or written in the flowfile content. Writing to flowfile content will overwrite any existing flowfile content.</td></tr><tr><td id="name"><strong>Input Content Type</strong></td><td id="default-value">use mime.type value</td><td id="allowable-values"><ul><li>use mime.type value</li><li>json</li><li>csv</li></ul></td><td id="description">Content Type of data present in the incoming FlowFile's content. Only "json" or "csv" are supported. If this value is set to "use mime.type value" the incoming Flowfile's attribute "MIME_TYPE" will be used to determine the Content Type.</td></tr><tr><td id="name">CSV Header Definition</td><td id="default-value"></td><td id="allowable-values"></td><td id="description">This property only applies to CSV content type. Comma separated string defining the column names expected in the CSV data. EX: "fname,lname,zip,address". The elements present in this string should be in the same order as the underlying data. Setting this property will cause the value of "Get CSV Header Definition From Data" to be ignored instead using this value.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Get CSV Header Definition From Data</strong></td><td id="default-value">true</td><td id="allowable-values"><ul><li>true</li><li>false</li></ul></td><td id="description">This property only applies to CSV content type. If "true" the processor will attempt to read the CSV header definition from the first line of the input data.</td></tr><tr><td id="name"><strong>CSV Header Line Skip Count</strong></td><td id="default-value">0</td><td id="allowable-values"></td><td id="description">This property only applies to CSV content type. Specifies the number of lines that should be skipped when reading the CSV data. Setting this value to 0 is equivalent to saying "the entire contents of the file should be read". If the property "Get CSV Header Definition From Data" is set then the first line of the CSV  file will be read in and treated as the CSV header definition. Since this will remove the header line from the data care should be taken to make sure the value of "CSV header Line Skip Count" is set to 0 to ensure no data is skipped.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name">CSV delimiter</td><td id="default-value">,</td><td id="allowable-values"></td><td id="description">Delimiter character for CSV records<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>CSV Escape String</strong></td><td id="default-value">\</td><td id="allowable-values"></td><td id="description">This property only applies to CSV content type. String that represents an escape sequence in the CSV FlowFile content data.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>CSV Quote String</strong></td><td id="default-value">'</td><td id="allowable-values"></td><td id="description">This property only applies to CSV content type. String that represents a literal quote character in the CSV FlowFile content data.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Pretty Avro Output</strong></td><td id="default-value">true</td><td id="allowable-values"><ul><li>true</li><li>false</li></ul></td><td id="description">If true the Avro output will be formatted.</td></tr><tr><td id="name"><strong>Avro Record Name</strong></td><td id="default-value"></td><td id="allowable-values"></td><td id="description">Value to be placed in the Avro record schema "name" field. The value must adhere to the Avro naming rules for fullname. If Expression Language is present then the evaluated value must adhere to the Avro naming rules.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Number Of Records To Analyze</strong></td><td id="default-value">10</td><td id="allowable-values"></td><td id="description">This property only applies to JSON content type. The number of JSON records that should be examined to determine the Avro schema. The higher the value the better chance kite has of detecting the appropriate type. However the default value of 10 is almost always enough.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Charset</strong></td><td id="default-value">UTF-8</td><td id="allowable-values"></td><td id="description">Character encoding of CSV data.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr></table><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>unsupported content</td><td>The content found in the flowfile content is not of the required format.</td></tr><tr><td>success</td><td>Successfully created Avro schema from data.</td></tr><tr><td>failure</td><td>Failed to create Avro schema from data.</td></tr><tr><td>original</td><td>Original incoming FlowFile data</td></tr></table><h3>Reads Attributes: </h3><table id="reads-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>mime.type</td><td>If configured by property "Input Content Type" will use this value to determine what sort of content should be inferred from the incoming FlowFile content.</td></tr></table><h3>Writes Attributes: </h3><table id="writes-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>inferred.avro.schema</td><td>If configured by "Schema output destination" to write to an attribute this will hold the resulting Avro schema from inferring the incoming FlowFile content.</td></tr></table><h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component requires an incoming relationship.<h3>System Resource Considerations:</h3>None specified.</body></html>